/*! This file is auto-generated */
!function(t,s){var o=t("#app_name"),n=t("#approve"),e=t("#reject"),r=o.closest("form"),c={userLogin:s.user_login,successUrl:s.success,rejectUrl:s.reject};n.on("click",function(e){var a=o.val(),p=t('input[name="app_id"]',r).val();e.preventDefault(),n.prop("aria-disabled")||(0===a.length?o.trigger("focus"):(n.prop("aria-disabled",!0).addClass("disabled"),e={name:a},0<p.length&&(e.app_id=p),e=gc.hooks.applyFilters("gc_appkeys_approve_app_request",e,c),gc.apiRequest({path:"/gc/v2/users/me/appkeys?_locale=user",method:"POST",data:e}).done(function(e,a,p){gc.hooks.doAction("gc_appkeys_approve_app_request_success",e,a,p);var a=s.success;a?(p=a+(-1===a.indexOf("?")?"?":"&")+"site_url="+encodeURIComponent(s.site_url)+"&user_login="+encodeURIComponent(s.user_login)+"&password="+encodeURIComponent(e.password),window.location=p):(a=gc.i18n.sprintf('<label for="new-appkey-value">'+gc.i18n.__("%s\u7684\u65b0Appkey\u4e3a\uff1a")+"</label>","<strong></strong>")+' <input id="new-appkey-value" type="text" class="code" readonly="readonly" value="" />',p=t("<div></div>").attr("role","alert").attr("tabindex",-1).addClass("notice notice-success notice-alt").append(t("<p></p>").addClass("appkey-display").html(a)).append("<p>"+gc.i18n.__("\u786e\u4fdd\u5c06\u5176\u4fdd\u5b58\u5728\u5b89\u5168\u7684\u4f4d\u7f6e\u3002 \u60a8\u5c06\u65e0\u6cd5\u68c0\u7d22\u5b83\u3002")+"</p>"),t("strong",p).text(e.name),t("input",p).val(e.password),r.replaceWith(p),p.trigger("focus"))}).fail(function(e,a,p){var s=p,o=null,s=(e.responseJSON&&(o=e.responseJSON).message&&(s=o.message),t("<div></div>").attr("role","alert").addClass("notice notice-error").append(t("<p></p>").text(s)));t("h1").after(s),n.removeProp("aria-disabled",!1).removeClass("disabled"),gc.hooks.doAction("gc_appkeys_approve_app_request_error",o,a,p,e)})))}),e.on("click",function(e){e.preventDefault(),gc.hooks.doAction("gc_appkeys_reject_app",c),window.location=s.reject}),r.on("submit",function(e){e.preventDefault()})}(jQuery,authApp);