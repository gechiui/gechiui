/*! This file is auto-generated */
this.gc=this.gc||{},this.gc.customizeWidgets=function(e){var t={};function n(c){if(t[c])return t[c].exports;var r=t[c]={i:c,l:!1,exports:{}};return e[c].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(c,r,function(t){return e[t]}.bind(null,r));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="kRZS")}({"2YC4":function(e,t,n){"use strict";n.d(t,"b",(function(){return Y})),n.d(t,"c",(function(){return D})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return Q})),n.d(t,"h",(function(){return H})),n.d(t,"f",(function(){return Z})),n.d(t,"g",(function(){return ee})),n.d(t,"a",(function(){return G})),n.d(t,"i",(function(){return T}));var c={};n.r(c),n.d(c,"enableComplementaryArea",(function(){return v})),n.d(c,"disableComplementaryArea",(function(){return y})),n.d(c,"pinItem",(function(){return C})),n.d(c,"unpinItem",(function(){return S})),n.d(c,"toggleFeature",(function(){return I})),n.d(c,"setFeatureValue",(function(){return x})),n.d(c,"setFeatureDefaults",(function(){return z}));var r={};n.r(r),n.d(r,"getActiveComplementaryArea",(function(){return N})),n.d(r,"isItemPinned",(function(){return B})),n.d(r,"isFeatureActive",(function(){return A}));var i=n("wx14"),s=n("ewfG"),o=n("TSYQ"),a=n.n(o),l=n("jd0n"),u=n("IgLd"),d=n("z4sU"),m=n("Tv9K"),b=n("8mSS"),h=n("lqn5"),p=n("3BOu"),g=n("Mg0k"),f=n("YLtl");const O=Object(u.combineReducers)({features(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("SET_FEATURE_DEFAULTS"===t.type){const{scope:n,defaults:c}=t;return{...e,[n]:{...e[n],...c}}}return e}}),j=Object(u.combineReducers)({features(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("SET_FEATURE_VALUE"===t.type){const{scope:n,featureName:c,value:r}=t;return{...e,[n]:{...e[n],[c]:r}}}return e}}),_=Object(u.combineReducers)({singleEnableItems:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,itemType:n,scope:c,item:r}=arguments.length>1?arguments[1]:void 0;return"SET_SINGLE_ENABLE_ITEM"===t&&n&&c?{...e,[n]:{...e[n],[c]:r||null}}:e},multipleEnableItems:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,itemType:n,scope:c,item:r,isEnable:i}=arguments.length>1?arguments[1]:void 0;if("SET_MULTIPLE_ENABLE_ITEM"!==t||!n||!c||!r||Object(f.get)(e,[n,c,r])===i)return e;const s=e[n]||{},o=s[c]||{};return{...e,[n]:{...s,[c]:{...o,[r]:i||!1}}}}});var w=Object(u.combineReducers)({enableItems:_,preferenceDefaults:O,preferences:j});function E(e,t,n){return{type:"SET_SINGLE_ENABLE_ITEM",itemType:e,scope:t,item:n}}function v(e,t){return E("complementaryArea",e,t)}function y(e){return E("complementaryArea",e,void 0)}function k(e,t,n,c){return{type:"SET_MULTIPLE_ENABLE_ITEM",itemType:e,scope:t,item:n,isEnable:c}}function C(e,t){return k("pinnedItems",e,t,!0)}function S(e,t){return k("pinnedItems",e,t,!1)}function I(e,t){return function(n){let{select:c,dispatch:r}=n;const i=c.isFeatureActive(e,t);r.setFeatureValue(e,t,!i)}}function x(e,t,n){return{type:"SET_FEATURE_VALUE",scope:e,featureName:t,value:!!n}}function z(e,t){return{type:"SET_FEATURE_DEFAULTS",scope:e,defaults:t}}function N(e,t){return function(e,t,n){return Object(f.get)(e.enableItems.singleEnableItems,[t,n])}(e,"complementaryArea",t)}function B(e,t,n){return!1!==function(e,t,n,c){return Object(f.get)(e.enableItems.multipleEnableItems,[t,n,c])}(e,"pinnedItems",t,n)}function A(e,t,n){var c,r;const i=null===(c=e.preferences.features[t])||void 0===c?void 0:c[n];return!!(void 0!==i?i:null===(r=e.preferenceDefaults.features[t])||void 0===r?void 0:r[n])}const T=Object(u.createReduxStore)("core/interface",{reducer:w,actions:c,selectors:r,persist:["enableItems","preferences"],__experimentalUseThunks:!0});Object(u.registerStore)("core/interface",{reducer:w,actions:c,selectors:r,persist:["enableItems","preferences"],__experimentalUseThunks:!0});var W=n("Xm27"),M=Object(W.withPluginContext)((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}));var L=M((function(e){let{as:t=l.Button,scope:n,identifier:c,icon:r,selectedIcon:o,...a}=e;const d=t,m=Object(u.useSelect)(e=>e(T).getActiveComplementaryArea(n)===c,[c]),{enableComplementaryArea:b,disableComplementaryArea:h}=Object(u.useDispatch)(T);return Object(s.createElement)(d,Object(i.a)({icon:o&&m?o:r,onClick:()=>{m?h(n):b(n,c)}},Object(f.omit)(a,["name"])))}));var P=e=>{let{smallScreenTitle:t,children:n,className:c,toggleButtonProps:r}=e;const o=Object(s.createElement)(L,Object(i.a)({icon:g.a},r));return Object(s.createElement)(s.Fragment,null,Object(s.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&Object(s.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),o),Object(s.createElement)("div",{className:a()("components-panel__header","interface-complementary-area-header",c),tabIndex:-1},n,o))};function F(e){let{name:t,as:n=l.Button,onClick:c,...r}=e;return Object(s.createElement)(l.Fill,{name:t},e=>{let{onClick:t}=e;return Object(s.createElement)(n,Object(i.a)({onClick:c||t?function(){(c||f.noop)(...arguments),(t||f.noop)(...arguments)}:void 0},r))})}F.Slot=function(e){let{name:t,as:n=l.ButtonGroup,fillProps:c={},bubblesVirtually:r,...i}=e;return Object(s.createElement)(l.Slot,{name:t,bubblesVirtually:r,fillProps:c},e=>{if(Object(f.isEmpty)(s.Children.toArray(e)))return null;const t=[];s.Children.forEach(e,e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:c}}=e;c&&n&&t.push(c)});const c=s.Children.map(e,e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e);return Object(s.createElement)(n,i,c)})};var G=F;const R=e=>Object(s.createElement)(l.MenuItem,Object(f.omit)(e,["__unstableExplicitMenuItem","__unstableTarget"]));function D(e){let{scope:t,target:n,__unstableExplicitMenuItem:c,...r}=e;return Object(s.createElement)(L,Object(i.a)({as:e=>Object(s.createElement)(G,Object(i.a)({__unstableExplicitMenuItem:c,__unstableTarget:`${t}/${n}`,as:R,name:t+"/plugin-more-menu"},e)),role:"menuitemcheckbox",selectedIcon:m.a,name:n,scope:t},r))}function V(e){let{scope:t,...n}=e;return Object(s.createElement)(l.Fill,Object(i.a)({name:"PinnedItems/"+t},n))}V.Slot=function(e){let{scope:t,className:n,...c}=e;return Object(s.createElement)(l.Slot,Object(i.a)({name:"PinnedItems/"+t},c),e=>!Object(f.isEmpty)(e)&&Object(s.createElement)("div",{className:a()(n,"interface-pinned-items")},e))};var H=V;function U(e){let{scope:t,children:n,className:c}=e;return Object(s.createElement)(l.Fill,{name:"ComplementaryArea/"+t},Object(s.createElement)("div",{className:c},n))}const $=M((function(e){let{children:t,className:n,closeLabel:c=Object(d.__)("关闭插件"),identifier:r,header:i,headerClassName:o,icon:g,isPinnable:f=!0,panelClassName:O,scope:j,name:_,smallScreenTitle:w,title:E,toggleShortcut:v,isActiveByDefault:y,showIconLabels:k=!1}=e;const{isActive:C,isPinned:S,activeArea:I,isSmall:x,isLarge:z}=Object(u.useSelect)(e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(T),c=t(j);return{isActive:c===r,isPinned:n(j,r),activeArea:c,isSmall:e(p.store).isViewportMatch("< medium"),isLarge:e(p.store).isViewportMatch("large")}},[r,j]);!function(e,t,n,c,r){const i=Object(s.useRef)(!1),o=Object(s.useRef)(!1),{enableComplementaryArea:a,disableComplementaryArea:l}=Object(u.useDispatch)(T);Object(s.useEffect)(()=>{c&&r&&!i.current?(l(e),o.current=!0):o.current&&!r&&i.current?(o.current=!1,a(e,t)):o.current&&n&&n!==t&&(o.current=!1),r!==i.current&&(i.current=r)},[c,r,e,t,n])}(j,r,I,C,x);const{enableComplementaryArea:N,disableComplementaryArea:B,pinItem:A,unpinItem:W}=Object(u.useDispatch)(T);return Object(s.useEffect)(()=>{y&&void 0===I&&!x&&N(j,r)},[I,y,j,r,x]),Object(s.createElement)(s.Fragment,null,f&&Object(s.createElement)(H,{scope:j},S&&Object(s.createElement)(L,{scope:j,identifier:r,isPressed:C&&(!k||z),"aria-expanded":C,label:E,icon:k?m.a:g,showTooltip:!k,variant:k?"tertiary":void 0})),_&&f&&Object(s.createElement)(D,{target:_,scope:j,icon:g},E),C&&Object(s.createElement)(U,{className:a()("interface-complementary-area",n),scope:j},Object(s.createElement)(P,{className:o,closeLabel:c,onClose:()=>B(j),smallScreenTitle:w,toggleButtonProps:{label:c,shortcut:v,scope:j,identifier:r}},i||Object(s.createElement)(s.Fragment,null,Object(s.createElement)("strong",null,E),f&&Object(s.createElement)(l.Button,{className:"interface-complementary-area__pin-unpin-item",icon:S?b.a:h.a,label:S?Object(d.__)("从工具栏移除"):Object(d.__)("固定至工具栏"),onClick:()=>(S?W:A)(j,r),isPressed:S,"aria-expanded":S}))),Object(s.createElement)(l.Panel,{className:O},t)))}));$.Slot=function(e){let{scope:t,...n}=e;return Object(s.createElement)(l.Slot,Object(i.a)({name:"ComplementaryArea/"+t},n))};var Y=$;var q=e=>{let{isActive:t}=e;return Object(s.useEffect)(()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}},[]),Object(s.useEffect)(()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")}),[t]),null},K=n("dMTb");var Q=Object(s.forwardRef)((function(e,t){let{footer:n,header:c,sidebar:r,secondarySidebar:o,notices:u,content:m,drawer:b,actions:h,labels:p,className:g,shortcuts:f}=e;const O=Object(l.__unstableUseNavigateRegions)(f);!function(e){Object(s.useEffect)(()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}},[e])}("interface-interface-skeleton__html-container");const j={...{drawer:Object(d.__)("抽屉"),header:Object(d.__)("表头"),body:Object(d.__)("内容"),secondarySidebar:Object(d.__)("区块库"),sidebar:Object(d.__)("设置"),actions:Object(d.__)("发布"),footer:Object(d.__)("注脚")},...p};return Object(s.createElement)("div",Object(i.a)({},O,{ref:Object(K.useMergeRefs)([t,O.ref]),className:a()(g,"interface-interface-skeleton",O.className,!!n&&"has-footer")}),!!b&&Object(s.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":j.drawer,tabIndex:"-1"},b),Object(s.createElement)("div",{className:"interface-interface-skeleton__editor"},!!c&&Object(s.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":j.header,tabIndex:"-1"},c),Object(s.createElement)("div",{className:"interface-interface-skeleton__body"},!!o&&Object(s.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":j.secondarySidebar,tabIndex:"-1"},o),!!u&&Object(s.createElement)("div",{className:"interface-interface-skeleton__notices"},u),Object(s.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":j.body,tabIndex:"-1"},m),!!r&&Object(s.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":j.sidebar,tabIndex:"-1"},r),!!h&&Object(s.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":j.actions,tabIndex:"-1"},h))),!!n&&Object(s.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":j.footer,tabIndex:"-1"},n))})),X=n("eTuh");function Z(e){let{as:t=l.DropdownMenu,className:n,label:c=Object(d.__)("选项"),popoverProps:r,toggleProps:i,children:o}=e;return Object(s.createElement)(t,{className:a()("interface-more-menu-dropdown",n),icon:X.a,label:c,popoverProps:{position:"bottom left",...r,className:a()("interface-more-menu-dropdown__content",null==r?void 0:r.className)},toggleProps:{tooltipPosition:"bottom",...i}},e=>o(e))}var J=n("NQKH");function ee(e){let{scope:t,label:n,info:c,messageActivated:r,messageDeactivated:i,shortcut:o,feature:a}=e;const b=Object(u.useSelect)(e=>e(T).isFeatureActive(t,a),[a]),{toggleFeature:h}=Object(u.useDispatch)(T);return Object(s.createElement)(l.MenuItem,{icon:b&&m.a,isSelected:b,onClick:()=>{h(t,a),b?Object(J.speak)(i||Object(d.__)("功能已禁用")):Object(J.speak)(r||Object(d.__)("功能已启用"))},role:"menuitemcheckbox",info:c,shortcut:o},n)}},"3BOu":function(e,t){e.exports=window.gc.viewport},"8mSS":function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"}));t.a=i},EXvS:function(e,t){e.exports=window.gc.dom},Gz8V:function(e,t){e.exports=window.gc.primitives},IgLd:function(e,t){e.exports=window.gc.data},IuOC:function(e,t){e.exports=window.gc.keyboardShortcuts},Mg0k:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));t.a=i},NQKH:function(e,t){e.exports=window.gc.a11y},NxuN:function(e,t){e.exports=window.gc.coreData},OwI1:function(e,t){e.exports=window.gc.widgets},TSYQ:function(e,t,n){var c;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var c=arguments[t];if(c){var i=typeof c;if("string"===i||"number"===i)e.push(c);else if(Array.isArray(c)){if(c.length){var s=r.apply(null,c);s&&e.push(s)}}else if("object"===i)if(c.toString===Object.prototype.toString)for(var o in c)n.call(c,o)&&c[o]&&e.push(o);else e.push(c.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(c=function(){return r}.apply(t,[]))||(e.exports=c)}()},Tv9K:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}));t.a=i},WNKN:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"}));t.a=i},Xm27:function(e,t){e.exports=window.gc.plugins},YLtl:function(e,t){e.exports=window.lodash},Yjv4:function(e,t){e.exports=window.gc.mediaUtils},dMTb:function(e,t){e.exports=window.gc.compose},eTuh:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}));t.a=i},ewfG:function(e,t){e.exports=window.gc.element},jd0n:function(e,t){e.exports=window.gc.components},kRZS:function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return ke}));var c={};n.r(c),n.d(c,"isInserterOpened",(function(){return z})),n.d(c,"__experimentalGetInsertionPoint",(function(){return N}));var r={};n.r(r),n.d(r,"setIsInserterOpened",(function(){return B}));var i=n("ewfG"),s=n("u+Ow"),o=n("OwI1"),a=n("n68F"),l=n("IgLd"),u=n("2YC4"),d=n("jd0n"),m=n("IuOC"),b=n("z4sU"),h=n("nLrk"),p=n("dMTb");function g(e){let{text:t,children:n}=e;const c=Object(p.useCopyToClipboard)(t);return Object(i.createElement)(d.Button,{variant:"secondary",ref:c},n)}class f extends i.Component{constructor(){super(...arguments),this.state={error:null}}componentDidCatch(e){this.setState({error:e})}render(){const{error:e}=this.state;return e?Object(i.createElement)(h.Warning,{className:"customize-widgets-error-boundary",actions:[Object(i.createElement)(g,{key:"copy-error",text:e.stack},Object(b.__)("复制错误"))]},Object(b.__)("编辑器遇到了未知错误。")):this.props.children}}var O=n("YLtl"),j=n("NxuN"),_=n("Yjv4"),w=n("wx14");var E=function(e){let{inspector:t,closeMenu:n,...c}=e;const r=Object(l.useSelect)(e=>e(h.store).getSelectedBlockClientId(),[]),s=Object(i.useMemo)(()=>document.getElementById("block-"+r),[r]);return Object(i.createElement)(d.MenuItem,Object(w.a)({onClick:()=>{t.open({returnFocusWhenClose:s}),n()}},c),Object(b.__)("显示更多设置"))},v=n("TSYQ"),y=n.n(v),k=n("l35S"),C=n("mkk6"),S=n("WNKN"),I=n("th/Q"),x=n("Mg0k");function z(e){return!!e.blockInserterPanel}function N(e){const{rootClientId:t,insertionIndex:n}=e.blockInserterPanel;return{rootClientId:t,insertionIndex:n}}function B(e){return{type:"SET_IS_INSERTER_OPENED",value:e}}const A={reducer:Object(l.combineReducers)({blockInserterPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_INSERTER_OPENED":return t.value}return e}}),selectors:c,actions:r},T=Object(l.createReduxStore)("core/customize-widgets",A);Object(l.registerStore)("core/customize-widgets",A);var W=function e(t){let{setIsOpened:n}=t;const c=Object(p.useInstanceId)(e,"customize-widget-layout__inserter-panel-title"),r=Object(l.useSelect)(e=>e(T).__experimentalGetInsertionPoint(),[]);return Object(i.createElement)("div",{className:"customize-widgets-layout__inserter-panel","aria-labelledby":c},Object(i.createElement)("div",{className:"customize-widgets-layout__inserter-panel-header"},Object(i.createElement)("h2",{id:c,className:"customize-widgets-layout__inserter-panel-header-title"},Object(b.__)("添加区块")),Object(i.createElement)(d.Button,{className:"customize-widgets-layout__inserter-panel-header-close-button",icon:x.a,onClick:()=>n(!1),"aria-label":Object(b.__)("关闭插入器")})),Object(i.createElement)("div",{className:"customize-widgets-layout__inserter-panel-content"},Object(i.createElement)(h.__experimentalLibrary,{rootClientId:r.rootClientId,__experimentalInsertionIndex:r.insertionIndex,showInserterHelpPanel:!0,onSelect:()=>n(!1)})))},M=n("rHI3");const L=[{keyCombination:{modifier:"primary",character:"b"},description:Object(b.__)("将选定的文字加粗。")},{keyCombination:{modifier:"primary",character:"i"},description:Object(b.__)("将选定的文字设为斜体。")},{keyCombination:{modifier:"primary",character:"k"},description:Object(b.__)("将选定的文字转换为链接。")},{keyCombination:{modifier:"primaryShift",character:"k"},description:Object(b.__)("移除链接。")},{keyCombination:{modifier:"primary",character:"u"},description:Object(b.__)("给选定的文字加下划线。")}];function P(e){let{keyCombination:t,forceAriaLabel:n}=e;const c=t.modifier?k.displayShortcutList[t.modifier](t.character):t.character,r=t.modifier?k.shortcutAriaLabel[t.modifier](t.character):t.character;return Object(i.createElement)("kbd",{className:"customize-widgets-keyboard-shortcut-help-modal__shortcut-key-combination","aria-label":n||r},Object(O.castArray)(c).map((e,t)=>"+"===e?Object(i.createElement)(i.Fragment,{key:t},e):Object(i.createElement)("kbd",{key:t,className:"customize-widgets-keyboard-shortcut-help-modal__shortcut-key"},e)))}var F=function(e){let{description:t,keyCombination:n,aliases:c=[],ariaLabel:r}=e;return Object(i.createElement)(i.Fragment,null,Object(i.createElement)("div",{className:"customize-widgets-keyboard-shortcut-help-modal__shortcut-description"},t),Object(i.createElement)("div",{className:"customize-widgets-keyboard-shortcut-help-modal__shortcut-term"},Object(i.createElement)(P,{keyCombination:n,forceAriaLabel:r}),c.map((e,t)=>Object(i.createElement)(P,{keyCombination:e,forceAriaLabel:r,key:t}))))};var G=function(e){let{name:t}=e;const{keyCombination:n,description:c,aliases:r}=Object(l.useSelect)(e=>{const{getShortcutKeyCombination:n,getShortcutDescription:c,getShortcutAliases:r}=e(m.store);return{keyCombination:n(t),aliases:r(t),description:c(t)}},[t]);return n?Object(i.createElement)(F,{keyCombination:n,description:c,aliases:r}):null};const R=e=>{let{shortcuts:t}=e;return Object(i.createElement)("ul",{className:"customize-widgets-keyboard-shortcut-help-modal__shortcut-list",role:"list"},t.map((e,t)=>Object(i.createElement)("li",{className:"customize-widgets-keyboard-shortcut-help-modal__shortcut",key:t},Object(O.isString)(e)?Object(i.createElement)(G,{name:e}):Object(i.createElement)(F,e))))},D=e=>{let{title:t,shortcuts:n,className:c}=e;return Object(i.createElement)("section",{className:y()("customize-widgets-keyboard-shortcut-help-modal__section",c)},!!t&&Object(i.createElement)("h2",{className:"customize-widgets-keyboard-shortcut-help-modal__section-title"},t),Object(i.createElement)(R,{shortcuts:n}))},V=e=>{let{title:t,categoryName:n,additionalShortcuts:c=[]}=e;const r=Object(l.useSelect)(e=>e(m.store).getCategoryShortcuts(n),[n]);return Object(i.createElement)(D,{title:t,shortcuts:r.concat(c)})};function H(e){let{isModalActive:t,toggleModal:n}=e;const{registerShortcut:c}=Object(l.useDispatch)(m.store);return c({name:"core/customize-widgets/keyboard-shortcuts",category:"main",description:Object(b.__)("显示这些键盘快捷键。"),keyCombination:{modifier:"access",character:"h"}}),Object(m.useShortcut)("core/customize-widgets/keyboard-shortcuts",n),t?Object(i.createElement)(d.Modal,{className:"customize-widgets-keyboard-shortcut-help-modal",title:Object(b.__)("键盘快捷键"),closeLabel:Object(b.__)("关闭"),onRequestClose:n},Object(i.createElement)(D,{className:"customize-widgets-keyboard-shortcut-help-modal__main-shortcuts",shortcuts:["core/customize-widgets/keyboard-shortcuts"]}),Object(i.createElement)(V,{title:Object(b.__)("全局快捷键"),categoryName:"global"}),Object(i.createElement)(V,{title:Object(b.__)("选定快捷键"),categoryName:"selection"}),Object(i.createElement)(V,{title:Object(b.__)("区块快捷键"),categoryName:"block",additionalShortcuts:[{keyCombination:{character:"/"},description:Object(b.__)("在添加新段落后修改区块类型。"),ariaLabel:Object(b.__)("正斜杠")}]}),Object(i.createElement)(D,{title:Object(b.__)("文字内容格式化"),shortcuts:L})):null}const U={className:"customize-widgets-more-menu__content"};function $(){const[e,t]=Object(i.useState)(!1),n=()=>t(!e);return Object(m.useShortcut)("core/customize-widgets/keyboard-shortcuts",n),Object(i.createElement)(i.Fragment,null,Object(i.createElement)(u.f,{as:d.ToolbarDropdownMenu,className:"customize-widgets-more-menu",popoverProps:U},()=>Object(i.createElement)(i.Fragment,null,Object(i.createElement)(d.MenuGroup,{label:Object(b._x)("View","noun")},Object(i.createElement)(u.g,{scope:"core/customize-widgets",feature:"fixedToolbar",label:Object(b.__)("顶部工具栏"),info:Object(b.__)("在一个位置访问所有的区块和文档工具"),messageActivated:Object(b.__)("顶部工具栏已启用"),messageDeactivated:Object(b.__)("顶部工具栏已禁用")})),Object(i.createElement)(d.MenuGroup,{label:Object(b.__)("工具")},Object(i.createElement)(d.MenuItem,{onClick:()=>{t(!0)},shortcut:k.displayShortcut.access("h")},Object(b.__)("键盘快捷键")),Object(i.createElement)(u.g,{scope:"core/customize-widgets",feature:"welcomeGuide",label:Object(b.__)("欢迎指南")}),Object(i.createElement)(d.MenuItem,{role:"menuitem",icon:M.a,href:Object(b.__)("https://www.gechiui.com/support/block-based-widgets-editor/"),target:"_blank",rel:"noopener noreferrer"},Object(b.__)("帮助"),Object(i.createElement)(d.VisuallyHidden,{as:"span"},Object(b.__)("（在新窗口中打开）")))),Object(i.createElement)(d.MenuGroup,{label:Object(b.__)("偏好设置")},Object(i.createElement)(u.g,{scope:"core/customize-widgets",feature:"keepCaretInsideBlock",label:Object(b.__)("在区块内包含文本光标"),info:Object(b.__)("通过阻止光标离开区块来帮助屏幕阅读器。"),messageActivated:Object(b.__)("启用区块内的文本光标"),messageDeactivated:Object(b.__)("禁用区块内的文本光标")})))),Object(i.createElement)(H,{isModalActive:e,toggleModal:n}))}var Y=function(e){let{sidebar:t,inserter:n,isInserterOpened:c,setIsInserterOpened:r,isFixedToolbarActive:s}=e;const[[o,a],l]=Object(i.useState)([t.hasUndo(),t.hasRedo()]);return Object(i.useEffect)(()=>t.subscribeHistory(()=>{l([t.hasUndo(),t.hasRedo()])}),[t]),Object(i.createElement)(i.Fragment,null,Object(i.createElement)("div",{className:y()("customize-widgets-header",{"is-fixed-toolbar-active":s})},Object(i.createElement)(h.NavigableToolbar,{className:"customize-widgets-header-toolbar","aria-label":Object(b.__)("文档工具")},Object(i.createElement)(d.ToolbarButton,{icon:Object(b.isRTL)()?S.a:C.a,label:Object(b.__)("撤销"),shortcut:k.displayShortcut.primary("z"),"aria-disabled":!o,onClick:t.undo,className:"customize-widgets-editor-history-button undo-button"}),Object(i.createElement)(d.ToolbarButton,{icon:Object(b.isRTL)()?C.a:S.a,label:Object(b.__)("重做"),shortcut:k.displayShortcut.primaryShift("z"),"aria-disabled":!a,onClick:t.redo,className:"customize-widgets-editor-history-button redo-button"}),Object(i.createElement)(d.ToolbarButton,{className:"customize-widgets-header-toolbar__inserter-toggle",isPressed:c,variant:"primary",icon:I.a,label:Object(b._x)("添加区块","Generic label for block inserter button"),onClick:()=>{r(e=>!e)}}),Object(i.createElement)($,null))),Object(i.createPortal)(Object(i.createElement)(W,{setIsOpened:r}),n.contentContainer[0]))};var q=n("xgAW"),K=n.n(q);function Q(e){const t=e.match(/^widget_(.+)(?:\[(\d+)\])$/);if(t){return`${t[1]}-${parseInt(t[2],10)}`}return e}function X(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const c="core/legacy-widget"===e.name&&(e.attributes.id||e.attributes.instance);if(c)if(e.attributes.id)t={id:e.attributes.id};else{const{encoded:c,hash:r,raw:i,...s}=e.attributes.instance;t={idBase:e.attributes.idBase,instance:{...null==n?void 0:n.instance,is_widget_customizer_js_value:!0,encoded_serialized_instance:c,instance_hash_key:r,raw_instance:i,...s}}}else{t={idBase:"block",widgetClass:"GC_Widget_Block",instance:{raw_instance:{content:Object(a.serialize)(e)}}}}return{...Object(O.omit)(n,["form","rendered"]),...t}}function Z(e){let t,{id:n,idBase:c,number:r,instance:i}=e;const{encoded_serialized_instance:s,instance_hash_key:l,raw_instance:u,...d}=i;if("block"===c){const e=Object(a.parse)(u.content);t=e.length?e[0]:Object(a.createBlock)("core/paragraph",{})}else t=r?Object(a.createBlock)("core/legacy-widget",{idBase:c,instance:{encoded:s,hash:l,raw:u,...d}}):Object(a.createBlock)("core/legacy-widget",{id:n});return Object(o.addWidgetIdToBlock)(t,n)}function J(e){const[t,n]=Object(i.useState)(()=>e.getWidgets().map(e=>Z(e)));Object(i.useEffect)(()=>e.subscribe((e,t)=>{n(n=>{const c=new Map(e.map(e=>[e.id,e])),r=new Map(n.map(e=>[Object(o.getWidgetIdFromBlock)(e),e])),i=t.map(e=>{const t=c.get(e.id);return t&&t===e?r.get(e.id):Z(e)});return K()(n,i)?n:i})}),[e]);const c=Object(i.useCallback)(t=>{n(n=>{if(K()(n,t))return n;const c=new Map(n.map(e=>[Object(o.getWidgetIdFromBlock)(e),e])),r=t.map(t=>{const n=Object(o.getWidgetIdFromBlock)(t);if(n&&c.has(n)){const r=c.get(n),i=e.getWidget(n);return Object(O.isEqual)(t,r)&&i?i:X(t,i)}return X(t)});if(K()(e.getWidgets(),r))return n;const i=e.setWidgets(r);return t.reduce((e,n,c)=>{const r=i[c];return null!==r&&(e===t&&(e=t.slice()),e[c]=Object(o.addWidgetIdToBlock)(n,r)),e},t)})},[e]);return[t,c,c]}const ee=Object(i.createContext)();function te(e){let{api:t,sidebarControls:n,children:c}=e;const[r,s]=Object(i.useState)({current:null}),o=Object(i.useCallback)(e=>{for(const t of n){if(t.setting.get().includes(e)){t.sectionInstance.expand({completeCallback(){s({current:e})}});break}}},[n]);Object(i.useEffect)(()=>{function e(e){const t=Q(e);o(t)}function n(){t.previewer.preview.bind("focus-control-for-setting",e)}return t.previewer.bind("ready",n),()=>{t.previewer.unbind("ready",n),t.previewer.preview.unbind("focus-control-for-setting",e)}},[t,o]);const a=Object(i.useMemo)(()=>[r,o],[r,o]);return Object(i.createElement)(ee.Provider,{value:a},c)}const ne=()=>Object(i.useContext)(ee);function ce(e){let{sidebar:t,settings:n,children:c}=e;const[r,s,a]=J(t);return function(e){const{selectBlock:t}=Object(l.useDispatch)(h.store),[n]=ne(),c=Object(i.useRef)(e);Object(i.useEffect)(()=>{c.current=e},[e]),Object(i.useEffect)(()=>{if(n.current){const e=c.current.find(e=>Object(o.getWidgetIdFromBlock)(e)===n.current);if(e){t(e.clientId);const n=document.querySelector(`[data-block="${e.clientId}"]`);null==n||n.focus()}}},[n,t])}(r),Object(i.createElement)(h.BlockEditorProvider,{value:r,onInput:s,onChange:a,settings:n,useSubRegistry:!1},c)}function re(e){let{sidebar:t}=e;const{toggleFeature:n}=Object(l.useDispatch)(u.i),c=t.getWidgets().every(e=>e.id.startsWith("block-"));return Object(i.createElement)("div",{className:"customize-widgets-welcome-guide"},Object(i.createElement)("div",{className:"customize-widgets-welcome-guide__image__wrapper"},Object(i.createElement)("picture",null,Object(i.createElement)("source",{srcSet:"https://s.w.org/images/block-editor/welcome-editor.svg",media:"(prefers-reduced-motion: reduce)"}),Object(i.createElement)("img",{className:"customize-widgets-welcome-guide__image",src:"https://s.w.org/images/block-editor/welcome-editor.gif",width:"312",height:"240",alt:""}))),Object(i.createElement)("h1",{className:"customize-widgets-welcome-guide__heading"},Object(b.__)("欢迎来到区块小工具")),Object(i.createElement)("p",{className:"customize-widgets-welcome-guide__text"},c?Object(b.__)(""):Object(b.__)("您现可在站点的小工具区添加任意区块。不用担心，您之前添加的所有小工具仍然可完美运作。")),Object(i.createElement)(d.Button,{className:"customize-widgets-welcome-guide__button",variant:"primary",onClick:()=>n("core/customize-widgets","welcomeGuide")},Object(b.__)("知道了")),Object(i.createElement)("hr",{className:"customize-widgets-welcome-guide__separator"}),!c&&Object(i.createElement)("p",{className:"customize-widgets-welcome-guide__more-info"},Object(b.__)("想坚持使用旧版小工具吗？"),Object(i.createElement)("br",null),Object(i.createElement)(d.ExternalLink,{href:Object(b.__)("https://www.gechiui.com/plugins/classic-widgets/")},Object(b.__)("获取经典小工具插件。"))),Object(i.createElement)("p",{className:"customize-widgets-welcome-guide__more-info"},Object(b.__)("新的区块编辑器？"),Object(i.createElement)("br",null),Object(i.createElement)(d.ExternalLink,{href:Object(b.__)("https://www.gechiui.com/support/gechiui-editor/")},Object(b.__)("这是详细的指南。"))))}function ie(e){let{undo:t,redo:n,save:c}=e;return Object(m.useShortcut)("core/customize-widgets/undo",e=>{t(),e.preventDefault()}),Object(m.useShortcut)("core/customize-widgets/redo",e=>{n(),e.preventDefault()}),Object(m.useShortcut)("core/customize-widgets/save",e=>{e.preventDefault(),c()}),null}ie.Register=function(){const{registerShortcut:e,unregisterShortcut:t}=Object(l.useDispatch)(m.store);return Object(i.useEffect)(()=>(e({name:"core/customize-widgets/undo",category:"global",description:Object(b.__)("撤销您的上一个更改。"),keyCombination:{modifier:"primary",character:"z"}}),e({name:"core/customize-widgets/redo",category:"global",description:Object(b.__)("重做您撤销的操作。"),keyCombination:{modifier:"primaryShift",character:"z"}}),e({name:"core/customize-widgets/save",category:"global",description:Object(b.__)("保存您的更改。"),keyCombination:{modifier:"primary",character:"s"}}),()=>{t("core/customize-widgets/undo"),t("core/customize-widgets/redo"),t("core/customize-widgets/save")}),[e]),null};var se=ie;function oe(e){const t=Object(i.useRef)(),n=Object(l.useSelect)(e=>0===e(h.store).getBlockCount());return Object(i.useEffect)(()=>{if(n&&t.current){const{ownerDocument:e}=t.current;e.activeElement&&e.activeElement!==e.body||t.current.focus()}},[n]),Object(i.createElement)(h.ButtonBlockAppender,Object(w.a)({},e,{ref:t}))}function ae(e){let{blockEditorSettings:t,sidebar:n,inserter:c,inspector:r}=e;const[s,o]=function(e){const t=Object(l.useSelect)(e=>e(T).isInserterOpened(),[]),{setIsInserterOpened:n}=Object(l.useDispatch)(T);return Object(i.useEffect)(()=>{t?e.open():e.close()},[e,t]),[t,Object(i.useCallback)(e=>{let t=e;"function"==typeof e&&(t=e(Object(l.select)(T).isInserterOpened())),n(t)},[n])]}(c),{hasUploadPermissions:a,isFixedToolbarActive:d,keepCaretInsideBlock:m,isWelcomeGuideActive:b}=Object(l.useSelect)(e=>{const{isFeatureActive:t}=e(u.i);return{hasUploadPermissions:Object(O.defaultTo)(e(j.store).canUser("create","media"),!0),isFixedToolbarActive:t("core/customize-widgets","fixedToolbar"),keepCaretInsideBlock:t("core/customize-widgets","keepCaretInsideBlock"),isWelcomeGuideActive:t("core/customize-widgets","welcomeGuide")}},[]),p=Object(i.useMemo)(()=>{let e;return a&&(e=e=>{let{onError:n,...c}=e;Object(_.uploadMedia)({gcAllowedMimeTypes:t.allowedMimeTypes,onError:e=>{let{message:t}=e;return n(t)},...c})}),{...t,__experimentalSetIsInserterOpened:o,mediaUpload:e,hasFixedToolbar:d,keepCaretInsideBlock:m,__unstableHasCustomAppender:!0}},[a,t,d,m,o]);return b?Object(i.createElement)(re,{sidebar:n}):Object(i.createElement)(i.Fragment,null,Object(i.createElement)(h.BlockEditorKeyboardShortcuts.Register,null),Object(i.createElement)(se.Register,null),Object(i.createElement)(ce,{sidebar:n,settings:p},Object(i.createElement)(se,{undo:n.undo,redo:n.redo,save:n.save}),Object(i.createElement)(Y,{sidebar:n,inserter:c,isInserterOpened:s,setIsInserterOpened:o,isFixedToolbarActive:d}),Object(i.createElement)(h.CopyHandler,null,Object(i.createElement)(h.BlockTools,null,Object(i.createElement)(h.__unstableEditorStyles,{styles:p.defaultEditorStyles}),Object(i.createElement)(h.BlockSelectionClearer,null,Object(i.createElement)(h.WritingFlow,{className:"editor-styles-wrapper"},Object(i.createElement)(h.ObserveTyping,null,Object(i.createElement)(h.BlockList,{renderAppender:oe})))))),Object(i.createPortal)(Object(i.createElement)("form",{onSubmit:e=>e.preventDefault()},Object(i.createElement)(h.BlockInspector,null)),r.contentContainer[0])),Object(i.createElement)(h.__unstableBlockSettingsMenuFirstItem,null,e=>{let{onClose:t}=e;return Object(i.createElement)(E,{inspector:r,closeMenu:t})}))}const le=Object(i.createContext)();function ue(e){let{sidebarControls:t,activeSidebarControl:n,children:c}=e;const r=Object(i.useMemo)(()=>({sidebarControls:t,activeSidebarControl:n}),[t,n]);return Object(i.createElement)(le.Provider,{value:r},c)}function de(e){let{api:t,sidebarControls:n,blockEditorSettings:c}=e;const[r,s]=Object(i.useState)(null),o=document.getElementById("customize-theme-controls"),a=Object(i.useRef)();!function(e,t){const{hasSelectedBlock:n,hasMultiSelection:c}=Object(l.useSelect)(h.store),{clearSelectedBlock:r}=Object(l.useDispatch)(h.store);Object(i.useEffect)(()=>{if(t.current&&e){const a=e.inspector,l=e.container[0],u=l.ownerDocument,d=u.defaultView;function i(e){!n()&&!c()||!e||!u.contains(e)||l.contains(e)||t.current.contains(e)||e.closest('[role="dialog"]')||a.expanded()||r()}function s(e){i(e.target)}function o(){i(u.activeElement)}return u.addEventListener("mousedown",s),d.addEventListener("blur",o),()=>{u.removeEventListener("mousedown",s),d.removeEventListener("blur",o)}}},[t,e,n,c,r])}(r,a),Object(i.useEffect)(()=>{const e=n.map(e=>e.subscribe(t=>{t&&s(e)}));return()=>{e.forEach(e=>e())}},[n]);const u=r&&Object(i.createPortal)(Object(i.createElement)(f,null,Object(i.createElement)(ae,{key:r.id,blockEditorSettings:c,sidebar:r.sidebarAdapter,inserter:r.inserter,inspector:r.inspector})),r.container[0]),b=o&&Object(i.createPortal)(Object(i.createElement)("div",{className:"customize-widgets-popover",ref:a},Object(i.createElement)(d.Popover.Slot,null)),o);return Object(i.createElement)(m.ShortcutProvider,null,Object(i.createElement)(d.SlotFillProvider,null,Object(i.createElement)(ue,{sidebarControls:n,activeSidebarControl:r},Object(i.createElement)(te,{api:t,sidebarControls:n},u,b))))}function me(){const{gc:{customize:e}}=window;return class extends e.Section{ready(){const t=function(){const{gc:{customize:e}}=window;return class extends e.Section{constructor(e,t){super(e,t),this.parentSection=t.parentSection,this.returnFocusWhenClose=null,this._isOpen=!1}get isOpen(){return this._isOpen}set isOpen(e){this._isOpen=e,this.triggerActiveCallbacks()}ready(){this.contentContainer[0].classList.add("customize-widgets-layout__inspector")}isContextuallyActive(){return this.isOpen}onChangeExpanded(e,t){super.onChangeExpanded(e,t),this.parentSection&&!t.unchanged&&(e?this.parentSection.collapse({manualTransition:!0}):this.parentSection.expand({manualTransition:!0,completeCallback:()=>{this.returnFocusWhenClose&&!this.contentContainer[0].contains(this.returnFocusWhenClose)&&this.returnFocusWhenClose.focus()}}))}open(){let{returnFocusWhenClose:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isOpen=!0,this.returnFocusWhenClose=e,this.expand({allowMultiple:!0})}close(){this.collapse({allowMultiple:!0})}collapse(e){this.isOpen=!1,super.collapse(e)}triggerActiveCallbacks(){this.active.callbacks.fireWith(this.active,[!1,!0])}}}();this.inspector=new t("widgets-inspector-"+this.id,{title:Object(b.__)("区块设置"),parentSection:this,customizeAction:[Object(b.__)("正在自定义"),Object(b.__)("小工具"),this.params.title].join(" ▸ ")}),e.section.add(this.inspector),this.contentContainer[0].classList.add("customize-widgets__sidebar-section")}hasSubSectionOpened(){return this.inspector.expanded()}onChangeExpanded(e,t){const n=this.controls(),c={...t,completeCallback(){var r;n.forEach(t=>{var n;null===(n=t.onChangeSectionExpanded)||void 0===n||n.call(t,e,c)}),null===(r=t.completeCallback)||void 0===r||r.call(t)}};c.manualTransition?e?(this.contentContainer.addClass(["busy","open"]),this.contentContainer.removeClass("is-sub-section-open"),this.contentContainer.closest(".gc-full-overlay").addClass("section-open"),this.contentContainer.one("transitionend",()=>{this.contentContainer.removeClass("busy"),c.completeCallback()})):(this.contentContainer.addClass(["busy","is-sub-section-open"]),this.contentContainer.closest(".gc-full-overlay").addClass("section-open"),this.contentContainer.removeClass("open"),this.contentContainer.one("transitionend",()=>{this.contentContainer.removeClass("busy"),c.completeCallback()})):super.onChangeExpanded(e,c)}}}const{gc:be}=window;function he(e){const t=e.match(/^(.+)-(\d+)$/);return t?{idBase:t[1],number:parseInt(t[2],10)}:{idBase:e}}function pe(e){const{idBase:t,number:n}=he(e);return n?`widget_${t}[${n}]`:"widget_"+t}class ge{constructor(e,t){this.setting=e,this.api=t,this.locked=!1,this.widgetsCache=new WeakMap,this.subscribers=new Set,this.history=[this._getWidgetIds().map(e=>this.getWidget(e))],this.historyIndex=0,this.historySubscribers=new Set,this._debounceSetHistory=function(e,t,n){let c,r=!1;function i(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];const a=(r?t:e).apply(this,s);return r=!0,clearTimeout(c),c=setTimeout(()=>{r=!1},n),a}return i.cancel=()=>{r=!1,clearTimeout(c)},i}(this._pushHistory,this._replaceHistory,1e3),this.setting.bind(this._handleSettingChange.bind(this)),this.api.bind("change",this._handleAllSettingsChange.bind(this)),this.undo=this.undo.bind(this),this.redo=this.redo.bind(this),this.save=this.save.bind(this)}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}getWidgets(){return this.history[this.historyIndex]}_emit(){for(const e of this.subscribers)e(...arguments)}_getWidgetIds(){return this.setting.get()}_pushHistory(){this.history=[...this.history.slice(0,this.historyIndex+1),this._getWidgetIds().map(e=>this.getWidget(e))],this.historyIndex+=1,this.historySubscribers.forEach(e=>e())}_replaceHistory(){this.history[this.historyIndex]=this._getWidgetIds().map(e=>this.getWidget(e))}_handleSettingChange(){if(this.locked)return;const e=this.getWidgets();this._pushHistory(),this._emit(e,this.getWidgets())}_handleAllSettingsChange(e){if(this.locked)return;if(!e.id.startsWith("widget_"))return;const t=Q(e.id);if(!this.setting.get().includes(t))return;const n=this.getWidgets();this._pushHistory(),this._emit(n,this.getWidgets())}_createWidget(e){const t=be.customize.Widgets.availableWidgets.findWhere({id_base:e.idBase});let n=e.number;t.get("is_multi")&&!n&&(t.set("multi_number",t.get("multi_number")+1),n=t.get("multi_number"));const c=n?`widget_${e.idBase}[${n}]`:"widget_"+e.idBase,r={transport:be.customize.Widgets.data.selectiveRefreshableWidgets[t.get("id_base")]?"postMessage":"refresh",previewer:this.setting.previewer};this.api.create(c,c,"",r).set(e.instance);return Q(c)}_removeWidget(e){const t=pe(e.id),n=this.api(t);if(n){const e=n.get();this.widgetsCache.delete(e)}this.api.remove(t)}_updateWidget(e){const t=this.getWidget(e.id);if(t===e)return e.id;if(t.idBase&&e.idBase&&t.idBase===e.idBase){const t=pe(e.id);return this.api(t).set(e.instance),e.id}return this._removeWidget(e),this._createWidget(e)}getWidget(e){if(!e)return null;const{idBase:t,number:n}=he(e),c=pe(e),r=this.api(c);if(!r)return null;const i=r.get();if(this.widgetsCache.has(i))return this.widgetsCache.get(i);const s={id:e,idBase:t,number:n,instance:i};return this.widgetsCache.set(i,s),s}_updateWidgets(e){this.locked=!0;const t=[],n=e.map(e=>{if(e.id&&this.getWidget(e.id))return t.push(null),this._updateWidget(e);const n=this._createWidget(e);return t.push(n),n});return this.getWidgets().filter(e=>!n.includes(e.id)).forEach(e=>this._removeWidget(e)),this.setting.set(n),this.locked=!1,t}setWidgets(e){const t=this._updateWidgets(e);return this._debounceSetHistory(),t}hasUndo(){return this.historyIndex>0}hasRedo(){return this.historyIndex<this.history.length-1}_seek(e){const t=this.getWidgets();this.historyIndex=e;const n=this.history[this.historyIndex];this._updateWidgets(n),this._emit(t,this.getWidgets()),this.historySubscribers.forEach(e=>e()),this._debounceSetHistory.cancel()}undo(){this.hasUndo()&&this._seek(this.historyIndex-1)}redo(){this.hasRedo()&&this._seek(this.historyIndex+1)}subscribeHistory(e){return this.historySubscribers.add(e),()=>{this.historySubscribers.delete(e)}}save(){this.api.previewer.save()}}var fe=n("EXvS");function Oe(){const{gc:{customize:e}}=window;return class extends e.Control{constructor(){super(...arguments),this.subscribers=new Set}ready(){const t=function(){const{gc:{customize:e}}=window,t=e.OuterSection;return e.OuterSection=class extends t{onChangeExpanded(t,n){return t&&e.section.each(e=>{"outer"===e.params.type&&e.id!==this.id&&e.expanded()&&e.collapse()}),super.onChangeExpanded(t,n)}},e.sectionConstructor.outer=e.OuterSection,class extends e.OuterSection{constructor(){super(...arguments),this.params.type="outer",this.activeElementBeforeExpanded=null;this.contentContainer[0].ownerDocument.defaultView.addEventListener("keydown",e=>{!this.expanded()||e.keyCode!==k.ESCAPE&&"Escape"!==e.code||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),Object(l.dispatch)(T).setIsInserterOpened(!1))},!0),this.contentContainer.addClass("widgets-inserter"),this.isFromInternalAction=!1,this.expanded.bind(()=>{this.isFromInternalAction||Object(l.dispatch)(T).setIsInserterOpened(this.expanded()),this.isFromInternalAction=!1})}open(){if(!this.expanded()){const e=this.contentContainer[0];this.activeElementBeforeExpanded=e.ownerDocument.activeElement,this.isFromInternalAction=!0,this.expand({completeCallback(){const t=fe.focus.tabbable.find(e)[1];t&&t.focus()}})}}close(){if(this.expanded()){const e=this.contentContainer[0],t=e.ownerDocument.activeElement;this.isFromInternalAction=!0,this.collapse({completeCallback(){e.contains(t)&&this.activeElementBeforeExpanded&&this.activeElementBeforeExpanded.focus()}})}}}}();this.inserter=new t("widgets-inserter-"+this.id,{}),e.section.add(this.inserter),this.sectionInstance=e.section(this.section()),this.inspector=this.sectionInstance.inspector,this.sidebarAdapter=new ge(this.setting,e)}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}onChangeSectionExpanded(e,t){t.unchanged||(e||Object(l.dispatch)(T).setIsInserterOpened(!1),this.subscribers.forEach(n=>n(e,t)))}}}var je=n("kZIl");const _e=Object(p.createHigherOrderComponent)(e=>t=>{let n=Object(o.getWidgetIdFromBlock)(t);const c=function(){const{sidebarControls:e}=Object(i.useContext)(le);return e}(),r=function(){const{activeSidebarControl:e}=Object(i.useContext)(le);return e}(),s=(null==c?void 0:c.length)>1,a=t.name,u=t.clientId,d=Object(l.useSelect)(e=>e(h.store).canInsertBlockType(a,""),[a]),m=Object(l.useSelect)(e=>e(h.store).getBlock(u),[u]),{removeBlock:b}=Object(l.useDispatch)(h.store),[,p]=ne();return Object(i.createElement)(i.Fragment,null,Object(i.createElement)(e,t),s&&d&&Object(i.createElement)(h.BlockControls,null,Object(i.createElement)(o.MoveToWidgetArea,{widgetAreas:c.map(e=>({id:e.id,name:e.params.label,description:e.params.description})),currentWidgetAreaId:null==r?void 0:r.id,onSelect:function(e){const t=c.find(t=>t.id===e);if(n){const e=r.setting,c=t.setting;e(Object(O.without)(e(),n)),c([...c(),n])}else{const e=t.sidebarAdapter;b(u);const c=e.setWidgets([...e.getWidgets(),X(m)]);n=c.reverse().find(e=>!!e)}p(n)}})))},"withMoveToSidebarToolbarItem");Object(je.addFilter)("editor.BlockEdit","core/customize-widgets/block-edit",_e);Object(je.addFilter)("editor.MediaUpload","core/edit-widgets/replace-media-upload",()=>_.MediaUpload);const{gc:we}=window,Ee=Object(p.createHigherOrderComponent)(e=>t=>{var n,c;const{idBase:r}=t.attributes,s=null!==(n=null===(c=we.customize.Widgets.data.availableWidgets.find(e=>e.id_base===r))||void 0===c?void 0:c.is_wide)&&void 0!==n&&n;return Object(i.createElement)(e,Object(w.a)({},t,{isWide:s}))},"withWideWidgetDisplay");Object(je.addFilter)("editor.BlockEdit","core/customize-widgets/wide-widget-display",Ee);const{gc:ve}=window,ye=["core/more","core/block","core/freeform","core/template-part"];function ke(e,t){Object(l.dispatch)(u.i).setFeatureDefaults("core/customize-widgets",{fixedToolbar:!1,welcomeGuide:!0}),Object(l.dispatch)(a.store).__experimentalReapplyBlockTypeFilters();const n=Object(s.__experimentalGetCoreBlocks)().filter(e=>!(ye.includes(e.name)||e.name.startsWith("core/post")||e.name.startsWith("core/query")||e.name.startsWith("core/site")||e.name.startsWith("core/navigation")));Object(s.registerCoreBlocks)(n),Object(o.registerLegacyWidgetBlock)(),Object(o.registerLegacyWidgetVariations)(t),Object(o.registerWidgetGroupBlock)(),Object(a.setFreeformContentHandlerName)("core/html");const c=Oe();ve.customize.sectionConstructor.sidebar=me(),ve.customize.controlConstructor.sidebar_block_editor=c;const r=document.createElement("div");document.body.appendChild(r),ve.customize.bind("ready",()=>{const e=[];ve.customize.control.each(t=>{t instanceof c&&e.push(t)}),Object(i.render)(Object(i.createElement)(de,{api:ve.customize,sidebarControls:e,blockEditorSettings:t}),r)})}},kZIl:function(e,t){e.exports=window.gc.hooks},l35S:function(e,t){e.exports=window.gc.keycodes},lqn5:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"}));t.a=i},mkk6:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"}));t.a=i},n68F:function(e,t){e.exports=window.gc.blocks},nLrk:function(e,t){e.exports=window.gc.blockEditor},rHI3:function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"}));t.a=i},"th/Q":function(e,t,n){"use strict";var c=n("ewfG"),r=n("Gz8V");const i=Object(c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(r.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"}));t.a=i},"u+Ow":function(e,t){e.exports=window.gc.blockLibrary},wx14:function(e,t,n){"use strict";function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return c}))},xgAW:function(e,t){e.exports=window.gc.isShallowEqual},z4sU:function(e,t){e.exports=window.gc.i18n}});