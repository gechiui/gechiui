/*! This file is auto-generated */
!function(t,o){var p=t("#app_name"),n=t("#approve"),e=t("#reject"),r=p.closest("form"),c={userLogin:o.user_login,successUrl:o.success,rejectUrl:o.reject};n.on("click",function(e){var a=p.val(),s=t('input[name="app_id"]',r).val();e.preventDefault(),n.prop("aria-disabled")||(0===a.length?p.trigger("focus"):(n.prop("aria-disabled",!0).addClass("disabled"),e={name:a},0<s.length&&(e.app_id=s),e=gc.hooks.applyFilters("gc_appkeys_approve_app_request",e,c),gc.apiRequest({path:"/gc/v2/users/me/appkeys?_locale=user",method:"POST",data:e}).done(function(e,a,s){gc.hooks.doAction("gc_appkeys_approve_app_request_success",e,a,s);var a=o.success;a?(s=a+(-1===a.indexOf("?")?"?":"&")+"site_url="+encodeURIComponent(o.site_url)+"&user_login="+encodeURIComponent(o.user_login)+"&password="+encodeURIComponent(e.password),window.location=s):(a=gc.i18n.sprintf('<label for="new-appkey-value">'+gc.i18n.__("%s\u7684\u65b0\u5e94\u7528\u7a0b\u5e8f\u5bc6\u7801\u4e3a\uff1a")+"</label>","<strong></strong>")+' <input id="new-appkey-value" type="text" class="code" readonly="readonly" value="" />',s=t("<div></div>").attr("role","alert").attr("tabindex",-1).addClass("notice notice-success notice-alt").append(t("<p></p>").addClass("appkey-display").html(a)).append("<p>"+gc.i18n.__("\u786e\u4fdd\u5c06\u5176\u4fdd\u5b58\u5728\u5b89\u5168\u7684\u4f4d\u7f6e\u3002 \u60a8\u5c06\u65e0\u6cd5\u68c0\u7d22\u5b83\u3002")+"</p>"),t("strong",s).text(e.name),t("input",s).val(e.password),r.replaceWith(s),s.trigger("focus"))}).fail(function(e,a,s){var o=s,p=null,o=(e.responseJSON&&(p=e.responseJSON).message&&(o=p.message),t("<div></div>").attr("role","alert").addClass("notice notice-error").append(t("<p></p>").text(o)));t("h1").after(o),n.removeProp("aria-disabled",!1).removeClass("disabled"),gc.hooks.doAction("gc_appkeys_approve_app_request_error",p,a,s,e)})))}),e.on("click",function(e){e.preventDefault(),gc.hooks.doAction("gc_appkeys_reject_app",c),window.location=o.reject}),r.on("submit",function(e){e.preventDefault()})}(jQuery,authApp);