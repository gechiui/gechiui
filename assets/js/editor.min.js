/*! This file is auto-generated */
window.gc=window.gc||{},function(g,u){u.editor=u.editor||{},window.switchEditors=new function(){var h,b,t={};function e(){!h&&window.tinymce&&(h=window.tinymce,(b=h.$)(document).on("click",function(e){e=b(e.target);e.hasClass("gc-switch-editor")&&n(e.attr("data-gc-editor-id"),e.hasClass("switch-tmce")?"tmce":"html")}))}function v(e){e=b(".mce-toolbar-grp",e.getContainer())[0],e=e&&e.clientHeight;return e&&10<e&&e<200?parseInt(e,10):30}function n(e,t){t=t||"toggle";var n,i,r,a,c,o,s,d,l,p,g=h.get(e=e||"content"),u=b("#gc-"+e+"-wrap"),m=b("#"+e),f=m[0];if("tmce"===(t="toggle"===t?g&&!g.isHidden()?"html":"tmce":t)||"tinymce"===t){if(g&&!g.isHidden())return!1;void 0!==window.QTags&&window.QTags.closeAllTags(e);var w=parseInt(f.style.height,10)||0;(g?g.getParam("gc_keep_scroll_position"):window.tinyMCEPreInit.mceInit[e]&&window.tinyMCEPreInit.mceInit[e].gc_keep_scroll_position)&&(a=m)&&a.length&&(a=a[0],o=function(e,t){var n=t.cursorStart,t=t.cursorEnd,i=x(e,n);i&&(n=-1!==["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(i.tagType)?i.ltPos:i.gtPos);i=x(e,t);i&&(t=i.gtPos);i=E(e,n);i&&!i.showAsPlainText&&(n=i.urlAtStartOfContent?i.endIndex:i.startIndex);i=E(e,t);i&&!i.showAsPlainText&&(t=i.urlAtEndOfContent?i.startIndex:i.endIndex);return{cursorStart:n,cursorEnd:t}}(a.value,{cursorStart:a.selectionStart,cursorEnd:a.selectionEnd}),c=o.cursorStart,o=o.cursorEnd,l=c!==o?"range":"single",s=null,d=y(b,"&#65279;").attr("data-mce-type","bookmark"),"range"==l&&(l=a.value.slice(c,o),p=d.clone().addClass("mce_SELRES_end"),s=[l,p[0].outerHTML].join("")),a.value=[a.value.slice(0,c),d.clone().addClass("mce_SELRES_start")[0].outerHTML,s,a.value.slice(o)].join("")),g?(g.show(),!h.Env.iOS&&w&&50<(w=w-v(g)+14)&&w<5e3&&g.theme.resizeTo(null,w),g.getParam("gc_keep_scroll_position")&&S(g)):h.init(window.tinyMCEPreInit.mceInit[e]),u.removeClass("html-active").addClass("tmce-active"),m.attr("aria-hidden",!0),window.setUserSetting("editor","tinymce")}else if("html"===t){if(g&&g.isHidden())return!1;g?(h.Env.iOS||(w=(l=g.iframeElement)?parseInt(l.style.height,10):0)&&50<(w=w+v(g)-14)&&w<5e3&&(f.style.height=w+"px"),p=null,g.getParam("gc_keep_scroll_position")&&(p=function(e){var t,n,i,r,a,c,o,s=e.getWin().getSelection();if(s&&!(s.rangeCount<1))return o="SELRES_"+Math.random(),c=y(e.$,o),a=c.clone().addClass("mce_SELRES_start"),c=c.clone().addClass("mce_SELRES_end"),r=s.getRangeAt(0),t=r.startContainer,n=r.startOffset,i=r.cloneRange(),0<e.$(t).parents(".mce-offscreen-selection").length?(t=e.$("[data-mce-selected]")[0],a.attr("data-mce-object-selection","true"),c.attr("data-mce-object-selection","true"),e.$(t).before(a[0]),e.$(t).after(c[0])):(i.collapse(!1),i.insertNode(c[0]),i.setStart(t,n),i.collapse(!0),i.insertNode(a[0]),r.setStartAfter(a[0]),r.setEndBefore(c[0]),s.removeAllRanges(),s.addRange(r)),e.on("GetContent",_),t=$(e.getContent()),e.off("GetContent",_),a.remove(),c.remove(),n=new RegExp('<span[^>]*\\s*class="mce_SELRES_start"[^>]+>\\s*'+o+"[^<]*<\\/span>(\\s*)"),i=new RegExp('(\\s*)<span[^>]*\\s*class="mce_SELRES_end"[^>]+>\\s*'+o+"[^<]*<\\/span>"),s=t.match(n),r=t.match(i),s?(e=s.index,a=s[0].length,c=null,r&&(-1!==s[0].indexOf("data-mce-object-selection")&&(a-=s[1].length),o=r.index,-1!==r[0].indexOf("data-mce-object-selection")&&(o-=r[1].length),c=o-a),{start:e,end:c}):null}(g)),g.hide(),p&&(c=g,d=p)&&(n=c.getElement(),i=d.start,r=d.end||d.start,n.focus)&&setTimeout(function(){n.setSelectionRange(i,r),n.blur&&n.blur(),n.focus()},100)):m.css({display:"",visibility:""}),u.removeClass("tmce-active").addClass("html-active"),m.attr("aria-hidden",!1),window.setUserSetting("editor","html")}}function x(e,t){var n,i=e.lastIndexOf("<",t-1);return(e.lastIndexOf(">",t)<i||">"===e.substr(t,1))&&(e=(t=e.substr(i)).match(/<\s*(\/)?(\w+|\!-{2}.*-{2})/))?(n=e[2],{ltPos:i,gtPos:i+t.indexOf(">")+1,tagType:n,isClosingTag:!!e[1]}):null}function E(e,t){for(var n=function(e){var t,n=function(e){var t=e.match(/\[+([\w_-])+/g),n=[];if(t)for(var i=0;i<t.length;i++){var r=t[i].replace(/^\[+/g,"");-1===n.indexOf(r)&&n.push(r)}return n}(e);if(0===n.length)return[];var i,r=u.shortcode.regexp(n.join("|")),a=[];for(;i=r.exec(e);){var c="["===i[1];t={shortcodeName:i[2],showAsPlainText:c,startIndex:i.index,endIndex:i.index+i[0].length,length:i[0].length},a.push(t)}var o=new RegExp('(^|[\\n\\r][\\n\\r]|<p>)(https?:\\/\\/[^s"]+?)(<\\/p>s*|[\\n\\r][\\n\\r]|$)',"gi");for(;i=o.exec(e);)t={shortcodeName:"url",showAsPlainText:!1,startIndex:i.index,endIndex:i.index+i[0].length,length:i[0].length,urlAtStartOfContent:""===i[1],urlAtEndOfContent:""===i[3]},a.push(t);return a}(e),i=0;i<n.length;i++){var r=n[i];if(t>=r.startIndex&&t<=r.endIndex)return r}}function y(e,t){return e("<span>").css({display:"inline-block",width:0,overflow:"hidden","line-height":0}).html(t||"")}function S(e){var t,n,i,r,a,c,o,s,d=e.$(".mce_SELRES_start").attr("data-mce-bogus",1),l=e.$(".mce_SELRES_end").attr("data-mce-bogus",1);d.length&&(e.focus(),l.length?((i=e.getDoc().createRange()).setStartAfter(d[0]),i.setEndBefore(l[0]),e.selection.setRng(i)):e.selection.select(d[0])),e.getParam("gc_keep_scroll_position")&&(i=d,i=(t=e).$(i).offset().top,r=t.$(t.getContentAreaContainer()).offset().top,a=v(t),c=g("#gc-content-editor-tools"),s=o=0,c.length&&(o=c.height(),s=c.offset().top),c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,(r+=i)<(c-=o+a)||(a=t.settings.gc_autoresize_on?(n=g("html,body"),Math.max(r-c/2,s-o)):(n=g(t.contentDocument).find("html,body"),i),n.animate({scrollTop:parseInt(a,10)},100))),p(d),p(l),e.save()}function p(e){var t=e.parent();e.remove(),!t.is("p")||t.children().length||t.text()||t.remove()}function _(e){e.content=e.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>")}function $(e){var t="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",n=t+"|div|p",t=t+"|pre",i=!1,r=!1,a=[];return e?(-1!==(e=-1===e.indexOf("<script")&&-1===e.indexOf("<style")?e:e.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(e){return a.push(e),"<gc-preserve>"})).indexOf("<pre")&&(i=!0,e=e.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,function(e){return(e=(e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<gc-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<gc-line-break>")).replace(/\r?\n/g,"<gc-line-break>")})),-1!==e.indexOf("[caption")&&(r=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e.replace(/<br([^>]*)>/g,"<gc-temp-br$1>").replace(/[\r\n\t]+/,"")})),e=(e=(e=(e=(e=-1!==(e=-1!==(e=-1!==(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("\\s*</("+n+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+n+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,function(e,t){return t&&-1!==t.indexOf("\n")?"\n\n":"\n"})).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+t+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+t+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")?(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>"):e).indexOf("<hr")?e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n"):e).indexOf("<object")?e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")}):e).replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),i&&(e=e.replace(/<gc-line-break>/g,"\n")),r&&(e=e.replace(/<gc-temp-br([^>]*)>/g,"<br$1>")),a.length?e.replace(/<gc-preserve>/g,function(){return a.shift()}):e):""}function i(e){var t=!1,n=!1,i="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return-1===(e=(e=-1!==(e=e.replace(/\r\n|\r/g,"\n")).indexOf("<object")?e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/\n+/g,"")}):e).replace(/<[^<>]+>/g,function(e){return e.replace(/[\n\t ]+/g," ")})).indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,function(e){return e.replace(/\n/g,"<gc-line-break>")})),-1!==(e=-1!==e.indexOf("<figcaption")?(e=e.replace(/\s*(<figcaption[^>]*>)/g,"$1")).replace(/<\/figcaption>\s*/g,"</figcaption>"):e).indexOf("[caption")&&(n=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return(e=(e=e.replace(/<br([^>]*)>/g,"<gc-temp-br$1>")).replace(/<[^<>]+>/g,function(e){return e.replace(/[\n\t ]+/," ")})).replace(/\s*\n\s*/g,"<gc-temp-br />")})),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="\n\n").replace(/<br \/>\s*<br \/>/gi,"\n\n")).replace(new RegExp("(<(?:"+i+")(?: [^>]*)?>)","gi"),"\n\n$1")).replace(new RegExp("(</(?:"+i+")>)","gi"),"$1\n\n")).replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n")).replace(/\s*<option/gi,"<option")).replace(/<\/option>\s*/gi,"</option>")).replace(/\n\s*\n+/g,"\n\n")).replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n")).replace(/<p>\s*?<\/p>/gi,"")).replace(new RegExp("<p>\\s*(</?(?:"+i+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/<p>(<li.+?)<\/p>/gi,"$1")).replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?(?:"+i+")(?: [^>]*)?>)","gi"),"$1")).replace(new RegExp("(</?(?:"+i+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/(<br[^>]*>)\s*\n/gi,"$1")).replace(/\s*\n/g,"<br />\n")).replace(new RegExp("(</?(?:"+i+")[^>]*>)\\s*<br />","gi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1")).replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]")).replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(e,t,n){return n.match(/<p( [^>]*)?>/)?e:t+"<p>"+n+"</p>"}),t&&(e=e.replace(/<gc-line-break>/g,"\n")),e=n?e.replace(/<gc-temp-br([^>]*)>/g,"<br$1>"):e}function r(e){e={o:t,data:e,unfiltered:e};return g&&g("body").trigger("beforePreGcautop",[e]),e.data=$(e.data),g&&g("body").trigger("afterPreGcautop",[e]),e.data}function a(e){e={o:t,data:e,unfiltered:e};return g&&g("body").trigger("beforeGcautop",[e]),e.data=i(e.data),g&&g("body").trigger("afterGcautop",[e]),e.data}return g(document).on("tinymce-editor-init.keep-scroll-position",function(e,t){t.$(".mce_SELRES_start").length&&S(t)}),g?g(e):document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):window.attachEvent&&(window.attachEvent("onload",e),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()})),u.editor.autop=a,u.editor.removep=r,t={go:n,gcautop:a,pre_gcautop:r,_gc_Autop:i,_gc_Nop:$}},u.editor.initialize=function(e,t){var n,i,r,a,c,o,s,d,l;g&&e&&u.editor.getDefaultSettings&&(l=u.editor.getDefaultSettings(),(t=t||{tinymce:!0}).tinymce&&t.quicktags&&(i=g("#"+e),r=g("<div>").attr({class:"gc-core-ui gc-editor-wrap tmce-active",id:"gc-"+e+"-wrap"}),a=g('<div class="gc-editor-container">'),c=g("<button>").attr({type:"button","data-gc-editor-id":e}),o=g('<div class="gc-editor-tools">'),t.mediaButtons&&(s="\u6dfb\u52a0\u5a92\u4f53",window._gcMediaViewsL10n&&window._gcMediaViewsL10n.addMedia&&(s=window._gcMediaViewsL10n.addMedia),(d=g('<button type="button" class="button insert-media add_media">')).append('<span class="gc-media-buttons-icon"></span>'),d.append(document.createTextNode(" "+s)),d.data("editor",e),o.append(g('<div class="gc-media-buttons">').append(d))),r.append(o.append(g('<div class="gc-editor-tabs">').append(c.clone().attr({id:e+"-tmce",class:"gc-switch-editor switch-tmce"}).text(window.tinymce.translate("Visual"))).append(c.attr({id:e+"-html",class:"gc-switch-editor switch-html"}).text(window.tinymce.translate("Text")))).append(a)),i.after(r),a.append(i)),window.tinymce&&t.tinymce&&("object"!=typeof t.tinymce&&(t.tinymce={}),(n=g.extend({},l.tinymce,t.tinymce)).selector="#"+e,g(document).trigger("gc-before-tinymce-init",n),window.tinymce.init(n),window.gcActiveEditor||(window.gcActiveEditor=e)),window.quicktags)&&t.quicktags&&("object"!=typeof t.quicktags&&(t.quicktags={}),(n=g.extend({},l.quicktags,t.quicktags)).id=e,g(document).trigger("gc-before-quicktags-init",n),window.quicktags(n),window.gcActiveEditor||(window.gcActiveEditor=n.id))},u.editor.remove=function(e){var t,n=g("#gc-"+e+"-wrap");window.tinymce&&(t=window.tinymce.get(e))&&(t.isHidden()||t.save(),t.remove()),window.quicktags&&(t=window.QTags.getInstance(e))&&t.remove(),n.length&&(n.after(g("#"+e)),n.remove())},u.editor.getContent=function(e){var t;if(g&&e)return window.tinymce&&(t=window.tinymce.get(e))&&!t.isHidden()&&t.save(),g("#"+e).val()}}(window.jQuery,window.gc);