/*! This file is auto-generated */
jQuery(function(v){var r,h=gc.i18n.__;function y(e,t){e.children().addClass("hidden"),e.children("."+t).removeClass("hidden")}function T(e){e.removeClass("has-request-results"),e.next().hasClass("request-results")&&e.next().remove()}function x(e,t,a,o){var s="",n="request-results";T(e),o.length&&(v.each(o,function(e,t){s=s+"<li>"+t+"</li>"}),s="<ul>"+s+"</ul>"),e.addClass("has-request-results"),e.hasClass("status-request-confirmed")&&(n+=" status-request-confirmed"),e.hasClass("status-request-failed")&&(n+=" status-request-failed"),e.after(function(){return'<tr class="'+n+'"><th colspan="5"><div class="notice inline notice-alt '+t+'"><p>'+a+"</p>"+s+"</div></td></tr>"})}v(".export-personal-data-handle").on("click",function(e){var t=v(this),n=t.parents(".export-personal-data"),r=t.parents("tr"),a=r.find(".export-progress"),i=t.parents(".row-actions"),c=n.data("request-id"),d=n.data("nonce"),u=n.data("exporters-count"),l=!!n.data("send-as-email");function p(e){var t=h("\u5728\u8bd5\u56fe\u5bfc\u51fa\u4e2a\u4eba\u6570\u636e\u65f6\u53d1\u751f\u9519\u8bef\u3002");y(n,"export-personal-data-failed"),e&&x(r,"notice-error",t,[e]),setTimeout(function(){i.removeClass("processing")},500)}function m(e){e=Math.round(100*(0<u?e/u:0)).toString()+"%";a.html(e)}e.preventDefault(),e.stopPropagation(),i.addClass("processing"),n.trigger("blur"),T(r),m(0),y(n,"export-personal-data-processing"),function t(o,s){v.ajax({url:window.ajaxurl,data:{action:"gc-privacy-export-personal-data",exporter:o,id:c,page:s,security:d,sendAsEmail:l},method:"post"}).done(function(e){var a=e.data;e.success?a.done?(m(o),o<u?setTimeout(t(o+1,1)):setTimeout(function(){var e,t;e=a.url,t=h("\u6b64\u7528\u6237\u7684\u4e2a\u4eba\u6570\u636e\u5bfc\u51fa\u94fe\u63a5\u5df2\u53d1\u9001\u3002"),void 0!==e&&(t=h("\u6b64\u7528\u6237\u7684\u4e2a\u4eba\u6570\u636e\u5bfc\u51fa\u6587\u4ef6\u5df2\u4e0b\u8f7d\u3002")),y(n,"export-personal-data-success"),x(r,"notice-success",t,[]),void 0!==e?window.location=e:l||p(h("\u672a\u751f\u6210\u4e2a\u4eba\u6570\u636e\u5bfc\u51fa\u6587\u4ef6\u3002")),setTimeout(function(){i.removeClass("processing")},500)},500)):setTimeout(t(o,s+1)):setTimeout(function(){p(e.data)},500)}).fail(function(e,t,a){setTimeout(function(){p(a)},500)})}(1,1)}),v(".remove-personal-data-handle").on("click",function(e){var t=v(this),n=t.parents(".remove-personal-data"),r=t.parents("tr"),a=r.find(".erasure-progress"),i=t.parents(".row-actions"),c=n.data("request-id"),d=n.data("nonce"),u=n.data("erasers-count"),l=!1,p=!1,m=[];function f(){var e=h("\u5728\u8bd5\u56fe\u67e5\u627e\u5e76\u62b9\u9664\u4e2a\u4eba\u6570\u636e\u65f6\u53d1\u751f\u9519\u8bef\u3002");y(n,"remove-personal-data-failed"),x(r,"notice-error",e,[]),setTimeout(function(){i.removeClass("processing")},500)}function g(e){e=Math.round(100*(0<u?e/u:0)).toString()+"%";a.html(e)}e.preventDefault(),e.stopPropagation(),i.addClass("processing"),n.trigger("blur"),T(r),g(0),y(n,"remove-personal-data-processing"),function a(o,s){v.ajax({url:window.ajaxurl,data:{action:"gc-privacy-erase-personal-data",eraser:o,id:c,page:s,security:d},method:"post"}).done(function(e){var t=e.data;e.success?(t.items_removed&&(l=l||t.items_removed),t.items_retained&&(p=p||t.items_retained),t.messages&&(m=m.concat(t.messages)),t.done?(g(o),o<u?setTimeout(a(o+1,1)):setTimeout(function(){var e,t;e=h("\u672a\u627e\u5230\u6b64\u7528\u6237\u7684\u4e2a\u4eba\u6570\u636e\u3002"),t="notice-success",y(n,"remove-personal-data-success"),!1===l?!1===p?e=h("\u672a\u627e\u5230\u6b64\u7528\u6237\u7684\u4e2a\u4eba\u6570\u636e\u3002"):(e=h("\u627e\u5230\u4e86\u6b64\u7528\u6237\u7684\u4e2a\u4eba\u6570\u636e\uff0c\u4f46\u5e76\u672a\u62b9\u9664\u3002"),t="notice-warning"):!1===p?e=h("\u6b64\u7528\u6237\u7684\u6240\u6709\u4e2a\u4eba\u6570\u636e\u5747\u5df2\u62b9\u9664\u3002"):(e=h("\u627e\u5230\u4e86\u6b64\u7528\u6237\u7684\u4e2a\u4eba\u6570\u636e\uff0c\u4f46\u5176\u4e2d\u4e00\u4e9b\u6570\u636e\u5e76\u672a\u62b9\u9664\u3002"),t="notice-warning"),x(r,t,e,m),setTimeout(function(){i.removeClass("processing")},500)},500)):setTimeout(a(o,s+1))):setTimeout(function(){f()},500)}).fail(function(){setTimeout(function(){f()},500)})}(1,1)}),v(document).on("click",function(e){var t,a,e=v(e.target),o=e.siblings(".success");if(clearTimeout(r),e.is("button.privacy-text-copy")&&(t=e.closest(".privacy-settings-accordion-panel")).length)try{var s=document.documentElement.scrollTop,n=document.body.scrollTop;window.getSelection().removeAllRanges(),a=document.createRange(),t.addClass("hide-privacy-policy-tutorial"),a.selectNodeContents(t[0]),window.getSelection().addRange(a),document.execCommand("copy"),t.removeClass("hide-privacy-policy-tutorial"),window.getSelection().removeAllRanges(),0<s&&s!==document.documentElement.scrollTop?document.documentElement.scrollTop=s:0<n&&n!==document.body.scrollTop&&(document.body.scrollTop=n),o.addClass("visible"),gc.a11y.speak(h("\u5efa\u8bae\u7684\u300a\u9690\u79c1\u653f\u7b56\u300b\u6587\u672c\u5df2\u88ab\u590d\u5236\u5230\u60a8\u7684\u526a\u8d34\u677f\u3002")),r=setTimeout(function(){o.removeClass("visible")},3e3)}catch(e){}}),v("body.options-privacy-php label[for=create-page]").on("click",function(e){e.preventDefault(),v("input#create-page").trigger("focus")}),v(".privacy-settings-accordion").on("click",".privacy-settings-accordion-trigger",function(){"true"===v(this).attr("aria-expanded")?(v(this).attr("aria-expanded","false"),v("#"+v(this).attr("aria-controls")).attr("hidden",!0)):(v(this).attr("aria-expanded","true"),v("#"+v(this).attr("aria-controls")).attr("hidden",!1))})});