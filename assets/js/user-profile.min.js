/*! This file is auto-generated */
!function(o){var e,a,t,n,i,r,l,d,c,p,u=!1,h=gc.i18n.__;function g(){"function"!=typeof zxcvbn?setTimeout(g,50):(!a.val()||p.hasClass("is-open")?(a.val(a.data("pw")),a.trigger("pwupdate")):b(),w(),1!==parseInt(r.data("start-masked"),10)?a.attr("type","text"):r.trigger("click"),o("#pw-weak-text-label").text(h("\u786e\u8ba4\u4f7f\u7528\u5f31\u5bc6\u7801")),o(a).trigger("focus"))}function f(s){r.attr({"aria-label":h(s?"\u663e\u793a\u5bc6\u7801":"\u9690\u85cf\u5bc6\u7801")}).find(".text").text(h(s?"\u663e\u793a":"\u9690\u85cf")).end().find(".dashicons").removeClass(s?"dashicons-hidden":"dashicons-visibility").addClass(s?"dashicons-visibility":"dashicons-hidden")}function m(s,e,a){var t=o("<div />");t.addClass("notice inline"),t.addClass("notice-"+(e?"success":"error")),t.text(o(o.parseHTML(a)).text()).wrapInner("<p />"),s.prop("disabled",e),s.siblings(".notice").remove(),s.before(t)}function v(){var s;e=o(".user-pass1-wrap, .user-pass-wrap, .reset-pass-submit"),o(".user-pass2-wrap").hide(),d=o("#submit, #gc-submit").on("click",function(){u=!1}),l=d.add(" #createusersub"),n=o(".pw-weak"),(i=n.find(".pw-checkbox")).on("change",function(){l.prop("disabled",!i.prop("checked"))}),(a=o("#pass1")).length?(c=a.val(),1===parseInt(a.data("reveal"),10)&&g(),a.on("input pwupdate",function(){a.val()!==c&&(c=a.val(),a.removeClass("short bad good strong"),w())})):a=o("#user_pass"),t=o("#pass2").on("input",function(){0<t.val().length&&(a.val(t.val()),t.val(""),c="",a.trigger("pwupdate"))}),a.is(":hidden")&&(a.prop("disabled",!0),t.prop("disabled",!0)),p=e.find(".gc-pwd"),s=e.find("button.gc-generate-pw"),(r=e.find(".gc-hide-pw")).show().on("click",function(){"password"===a.attr("type")?(a.attr("type","text"),f(!1)):(a.attr("type","password"),f(!0))}),s.show(),s.on("click",function(){u=!0,s.not(".skip-aria-expanded").attr("aria-expanded","true"),p.show().addClass("is-open"),a.attr("disabled",!1),t.attr("disabled",!1),g(),f(!1),gc.ajax.post("generate-password").done(function(s){a.data("pw",s)})}),e.find("button.gc-cancel-pw").on("click",function(){u=!1,a.prop("disabled",!0),t.prop("disabled",!0),a.val("").trigger("pwupdate"),f(!1),p.hide().removeClass("is-open"),l.prop("disabled",!1),s.attr("aria-expanded","false")}),e.closest("form").on("submit",function(){u=!1,a.prop("disabled",!1),t.prop("disabled",!1),t.val(a.val())})}function b(){var s=o("#pass1").val();if(o("#pass-strength-result").removeClass("short bad good strong empty"),s&&""!==s.trim())switch(gc.passwordStrength.meter(s,gc.passwordStrength.userInputDisallowedList(),s)){case-1:o("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:o("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:o("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:o("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:o("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:o("#pass-strength-result").addClass("short").html(pwsL10n.short)}else o("#pass-strength-result").addClass("empty").html("&nbsp;")}function w(){var s=o("#pass-strength-result")[0];s.className&&(a.addClass(s.className),o(s).is(".short, .bad")?(i.prop("checked")||l.prop("disabled",!0),n.show()):(o(s).is(".empty")?(l.prop("disabled",!0),i.prop("checked",!1)):l.prop("disabled",!1),n.hide()))}o(function(){var s,a,t,n,i=o("#display_name"),e=i.val(),r=o("#gc-admin-bar-my-account").find(".display-name");o("#pass1").val("").on("input pwupdate",b),o("#pass-strength-result").show(),o(".color-palette").on("click",function(){o(this).siblings('input[name="admin_color"]').prop("checked",!0)}),i.length&&(o("#first_name, #last_name, #nickname").on("blur.user_profile",function(){var a=[],t={display_nickname:o("#nickname").val()||"",display_username:o("#user_login").val()||"",display_firstname:o("#first_name").val()||"",display_lastname:o("#last_name").val()||""};t.display_firstname&&t.display_lastname&&(t.display_firstlast=t.display_firstname+" "+t.display_lastname,t.display_lastfirst=t.display_lastname+" "+t.display_firstname),o.each(o("option",i),function(s,e){a.push(e.value)}),o.each(t,function(s,e){e&&(e=e.replace(/<\/?[a-z][^>]*>/gi,""),t[s].length&&-1===o.inArray(e,a)&&(a.push(e),o("<option />",{text:e}).appendTo(i)))})}),i.on("change",function(){var s;t===n&&(s=this.value.trim()||e,r.text(s))})),s=o("#color-picker"),a=o("#colors-css"),t=o("input#user_id").val(),n=o('input[name="checkuser_id"]').val(),s.on("click.colorpicker",".color-option",function(){var s,e=o(this);if(!e.hasClass("selected")&&(e.siblings(".selected").removeClass("selected"),e.addClass("selected").find('input[type="radio"]').prop("checked",!0),t===n)){if((a=0===a.length?o('<link rel="stylesheet" />').appendTo("head"):a).attr("href",e.children(".css_url").val()),"undefined"!=typeof gc&&gc.svgPainter){try{s=JSON.parse(e.children(".icon_colors").val())}catch(s){}s&&(gc.svgPainter.setColors(s),gc.svgPainter.paint())}o.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:e.children('input[name="admin_color"]').val(),nonce:o("#color-nonce").val()}).done(function(s){s.success&&o("body").removeClass(s.data.previousScheme).addClass(s.data.currentScheme)})}}),v(),o("#generate-reset-link").on("click",function(){var e=o(this),s={user_id:userProfileL10n.user_id,nonce:userProfileL10n.nonce},s=(e.parent().find(".notice-error").remove(),gc.ajax.post("send-password-reset",s));s.done(function(s){m(e,!0,s)}),s.fail(function(s){m(e,!1,s)})})}),o("#destroy-sessions").on("click",function(s){var e=o(this);gc.ajax.post("destroy-sessions",{nonce:o("#_gcnonce").val(),user_id:o("#user_id").val()}).done(function(s){e.prop("disabled",!0),e.siblings(".notice").remove(),e.before('<div class="notice notice-success inline"><p>'+s.message+"</p></div>")}).fail(function(s){e.siblings(".notice").remove(),e.before('<div class="notice notice-error inline"><p>'+s.message+"</p></div>")}),s.preventDefault()}),window.generatePassword=g,o(window).on("beforeunload",function(){if(!0===u)return h("\u60a8\u7684\u65b0\u5bc6\u7801\u672a\u88ab\u4fdd\u5b58\u3002")}),o(function(){o(".reset-pass-submit").length&&o(".reset-pass-submit button.gc-generate-pw").trigger("click")})}(jQuery);