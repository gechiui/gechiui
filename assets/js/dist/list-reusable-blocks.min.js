/*! This file is auto-generated */
!function(){"use strict";var o={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},d:function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},e={},l=(o.r(e),window.gc.element),d=window.gc.i18n;var s=function(){return(s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.create;Object.create;function u(e){return e.toLowerCase()}var p=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],m=/[^A-Z0-9]+/gi;function f(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(e,t){return e.replace(t,n)},e)}function r(e,t){for(var n=(t=void 0===(t=s({delimiter:"."},t=void 0===t?{}:t))?{}:t).splitRegexp,o=void 0===(o=t.stripRegexp)?m:o,r=void 0===(r=t.transform)?u:r,t=void 0===(t=t.delimiter)?" ":t,a=f(f(e,void 0===n?p:n,"$1\0$2"),o,"\0"),c=0,i=a.length;"\0"===a.charAt(c);)c++;for(;"\0"===a.charAt(i-1);)i--;return a.slice(c,i).split("\0").map(r).join(t)}var t=window.gc.apiFetch,a=o.n(t);var n=async function(e){var t,n=await a()({path:"/gc/v2/types/gc_block"}),e=(n=await a()({path:`/gc/v2/${n.rest_base}/${e}?context=edit`})).title.raw,o=n.content.raw,n=n.gc_pattern_sync_status,o=JSON.stringify({__file:"gc_block",title:e,content:o,syncStatus:n},null,2),n=r(e,s({delimiter:"-"},t=void 0===t?{}:t))+".json";e=n,t=o,n="application/json",t=new window.Blob([t],{type:n}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(t,e):((n=document.createElement("a")).href=URL.createObjectURL(t),n.download=e,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n))},c=window.gc.compose,b=window.gc.components;var g=async function(e){e=await function(t){const n=new window.FileReader;return new Promise(e=>{n.onload=()=>{e(n.result)},n.readAsText(t)})}(e);let t;try{t=JSON.parse(e)}catch(e){throw new Error("\u65e0\u6548\u7684JSON\u6587\u4ef6")}if("gc_block"!==t.__file||!t.title||!t.content||"string"!=typeof t.title||"string"!=typeof t.content||t.syncStatus&&"string"!=typeof t.syncStatus)throw new Error("\u65e0\u6548\u7684\u533a\u5757\u6837\u677f JSON \u6587\u4ef6");return e=await a()({path:"/gc/v2/types/gc_block"}),await a()({path:"/gc/v2/"+e.rest_base,data:{title:t.title,content:t.content,status:"publish",meta:"unsynced"===t.syncStatus?{gc_pattern_sync_status:t.syncStatus}:void 0},method:"POST"})};var i=(0,c.withInstanceId)(function({instanceId:e,onUpload:t}){e="list-reusable-blocks-import-form-"+e;const n=(0,l.useRef)(),[o,r]=(0,l.useState)(!1),[a,c]=(0,l.useState)(null),[i,s]=(0,l.useState)(null);return(0,l.createElement)("form",{className:"list-reusable-blocks-import-form",onSubmit:e=>{e.preventDefault(),i&&(r({isLoading:!0}),g(i).then(e=>{n&&(r(!1),t(e))}).catch(t=>{if(n){let e;switch(t.message){case"\u65e0\u6548\u7684JSON\u6587\u4ef6":e=(0,d.__)("\u65e0\u6548\u7684JSON\u6587\u4ef6");break;case"\u65e0\u6548\u7684\u533a\u5757\u6837\u677f JSON \u6587\u4ef6":e=(0,d.__)("\u65e0\u6548\u7684\u533a\u5757\u6837\u677f JSON \u6587\u4ef6");break;default:e=(0,d.__)("\u672a\u77e5\u9519\u8bef")}r(!1),c(e)}}))},ref:n},a&&(0,l.createElement)(b.Notice,{status:"error",onRemove:()=>{c(null)}},a),(0,l.createElement)("label",{htmlFor:e,className:"list-reusable-blocks-import-form__label"},(0,d.__)("\u6587\u4ef6")),(0,l.createElement)("input",{id:e,type:"file",onChange:e=>{s(e.target.files[0]),c(null)}}),(0,l.createElement)(b.Button,{type:"submit",isBusy:o,disabled:!i||o,variant:"secondary",className:"list-reusable-blocks-import-form__button"},(0,d._x)("\u5bfc\u5165","button label")))});function v({onUpload:t}){return(0,l.createElement)(b.Dropdown,{popoverProps:{placement:"bottom-start"},contentClassName:"list-reusable-blocks-import-dropdown__content",renderToggle:({isOpen:e,onToggle:t})=>(0,l.createElement)(b.Button,{"aria-expanded":e,onClick:t,variant:"primary"},(0,d.__)("\u4eceJSON\u5bfc\u5165")),renderContent:({onClose:e})=>(0,l.createElement)(i,{onUpload:(0,c.pipe)(e,t)})})}document.body.addEventListener("click",e=>{e.target.classList.contains("gc-list-reusable-blocks__export")&&(e.preventDefault(),n(e.target.dataset.id))}),document.addEventListener("DOMContentLoaded",()=>{var e,t=document.querySelector(".page-title-action");t&&((e=document.createElement("div")).className="list-reusable-blocks__container",t.parentNode.insertBefore(e,t),(0,l.createRoot)(e).render((0,l.createElement)(v,{onUpload:()=>{var e=document.createElement("div"),t=(e.className="notice notice-success is-dismissible",e.innerHTML=`<p>${(0,d.__)("\u533a\u5757\u6837\u677f\u5bfc\u5165\u6210\u529f\uff01")}</p>`,document.querySelector(".gc-header-end"));t&&t.parentNode.insertBefore(e,t)}})))}),(window.gc=window.gc||{}).listReusableBlocks=e}();