/*! This file is auto-generated */
this.gc=this.gc||{},this.gc.reusableBlocks=function(n){var c={};function r(e){if(c[e])return c[e].exports;var t=c[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)r.d(n,c,function(e){return t[e]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="nPLi")}({Gz8V:function(e,t){e.exports=window.gc.primitives},IgLd:function(e,t){e.exports=window.gc.data},NxuN:function(e,t){e.exports=window.gc.coreData},W2Kb:function(e,t){e.exports=window.gc.notices},YLtl:function(e,t){e.exports=window.lodash},ewfG:function(e,t){e.exports=window.gc.element},jd0n:function(e,t){e.exports=window.gc.components},n68F:function(e,t){e.exports=window.gc.blocks},nLrk:function(e,t){e.exports=window.gc.blockEditor},nPLi:function(e,t,n){"use strict";n.r(t),n.d(t,"store",function(){return m}),n.d(t,"ReusableBlocksMenuItems",function(){return B});var t={},c=(n.r(t),n.d(t,"__experimentalConvertBlockToStatic",function(){return r}),n.d(t,"__experimentalConvertBlocksToReusable",function(){return l}),n.d(t,"__experimentalDeleteReusableBlock",function(){return i}),n.d(t,"__experimentalSetEditingReusableBlock",function(){return s}),{}),b=(n.r(c),n.d(c,"__experimentalIsEditingReusableBlock",function(){return u}),n("IgLd")),o=n("YLtl"),d=n("nLrk"),p=n("n68F"),f=n("z4sU");const r=r=>e=>{let t=e["registry"];e=t.select(d.store).getBlock(r);const n=t.select("core").getEditedEntityRecord("postType","gc_block",e.attributes.ref);var c=Object(p.parse)(Object(o.isFunction)(n.content)?n.content(n):n.content);t.dispatch(d.store).replaceBlocks(e.clientId,c)},l=(c,r)=>async e=>{let{registry:t,dispatch:n}=e;e={title:r||Object(f.__)("\u672a\u547d\u540d\u53ef\u91cd\u7528\u533a\u5757"),content:Object(p.serialize)(t.select(d.store).getBlocksByClientId(c)),status:"publish"},e=await t.dispatch("core").saveEntityRecord("postType","gc_block",e),e=Object(p.createBlock)("core/block",{ref:e.id});t.dispatch(d.store).replaceBlocks(c,e),n.__experimentalSetEditingReusableBlock(e.clientId,!0)},i=r=>async e=>{let t=e["registry"];if(t.select("core").getEditedEntityRecord("postType","gc_block",r)){const n=t.select(d.store).getBlocks(),c=n.filter(e=>Object(p.isReusableBlock)(e)&&e.attributes.ref===r);e=c.map(e=>e.clientId);e.length&&t.dispatch(d.store).removeBlocks(e),await t.dispatch("core").deleteEntityRecord("postType","gc_block",r)}};function s(e,t){return{type:"SET_EDITING_REUSABLE_BLOCK",clientId:e,isEditing:t}}var a=Object(b.combineReducers)({isEditingReusableBlock:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"SET_EDITING_REUSABLE_BLOCK"===(null==t?void 0:t.type)?{...e,[t.clientId]:t.isEditing}:e}});function u(e,t){return e.isEditingReusableBlock[t]}const m=Object(b.createReduxStore)("core/reusable-blocks",{actions:t,reducer:a,selectors:c,__experimentalUseThunks:!0});Object(b.register)(m);var g=n("ewfG"),_=n("jd0n"),t=n("Gz8V"),j=Object(g.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(g.createElement)(t.Path,{d:"M7 7.2h8.2L13.5 9l1.1 1.1 3.6-3.6-3.5-4-1.1 1 1.9 2.3H7c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.2-.5zm13.8 4V11h-1.5v.3c0 1.1 0 3.5-1 4.5-.3.3-.7.5-1.3.5H8.8l1.7-1.7-1.1-1.1L5.9 17l3.5 4 1.1-1-1.9-2.3H17c.9 0 1.7-.3 2.3-.9 1.5-1.4 1.5-4.2 1.5-5.6z"})),O=n("W2Kb"),k=n("NxuN");function y(e){let{clientIds:l,rootClientId:i}=e;const[n,c]=Object(g.useState)(!1),[r,o]=Object(g.useState)("");e=Object(b.useSelect)(e=>{var t;const n=e(k.store)["canUser"],{getBlocksByClientId:c,canInsertBlockType:r}=e(d.store),o=null!=(t=c(l))?t:[];return!(1===o.length&&o[0]&&Object(p.isReusableBlock)(o[0])&&!!e(k.store).getEntityRecord("postType","gc_block",o[0].attributes.ref))&&r("core/block",i)&&o.every(e=>!!e&&e.isValid&&Object(p.hasBlockSupport)(e.name,"reusable",!0))&&!!n("create","blocks")},[l]);const t=Object(b.useDispatch)(m)["__experimentalConvertBlocksToReusable"],{createSuccessNotice:s,createErrorNotice:a}=Object(b.useDispatch)(O.store),u=Object(g.useCallback)(async function(e){try{await t(l,e),s(Object(f.__)("\u53ef\u91cd\u7528\u533a\u5757\u5df2\u521b\u5efa\u3002"),{type:"snackbar"})}catch(e){a(e.message,{type:"snackbar"})}},[l]);return e?Object(g.createElement)(d.BlockSettingsMenuControls,null,e=>{let t=e["onClose"];return Object(g.createElement)(g.Fragment,null,Object(g.createElement)(_.MenuItem,{icon:j,onClick:()=>{c(!0)}},Object(f.__)("\u6dfb\u52a0\u81f3\u53ef\u91cd\u7528\u533a\u5757")),n&&Object(g.createElement)(_.Modal,{title:Object(f.__)("\u521b\u5efa\u53ef\u91cd\u7528\u533a\u5757"),closeLabel:Object(f.__)("\u5173\u95ed"),onRequestClose:()=>{c(!1),o("")},overlayClassName:"reusable-blocks-menu-items__convert-modal"},Object(g.createElement)("form",{onSubmit:e=>{e.preventDefault(),u(r),c(!1),o(""),t()}},Object(g.createElement)(_.TextControl,{label:Object(f.__)("\u663e\u793a\u540d\u79f0"),value:r,onChange:o}),Object(g.createElement)(_.Flex,{className:"reusable-blocks-menu-items__convert-modal-actions",justify:"flex-end"},Object(g.createElement)(_.FlexItem,null,Object(g.createElement)(_.Button,{variant:"secondary",onClick:()=>{c(!1),o("")}},Object(f.__)("\u53d6\u6d88"))),Object(g.createElement)(_.FlexItem,null,Object(g.createElement)(_.Button,{variant:"primary",type:"submit"},Object(f.__)("\u4fdd\u5b58")))))))}):null}var E=n("zP/e");function v(e){let c=e["clientId"];e=Object(b.useSelect)(e=>{const t=e(d.store)["getBlock"],n=e(k.store)["canUser"];e=t(c);return{isVisible:!!e&&Object(p.isReusableBlock)(e)&&!!n("update","blocks",e.attributes.ref)}},[c]).isVisible;const t=Object(b.useDispatch)(m)["__experimentalConvertBlockToStatic"];return e?Object(g.createElement)(d.BlockSettingsMenuControls,null,Object(g.createElement)(_.MenuItem,{href:Object(E.addQueryArgs)("edit.php",{post_type:"gc_block"})},Object(f.__)("\u7ba1\u7406\u53ef\u91cd\u7528\u533a\u5757")),Object(g.createElement)(_.MenuItem,{onClick:()=>t(c)},Object(f.__)("\u8f6c\u6362\u4e3a\u5e38\u89c4\u533a\u5757"))):null}var B=Object(b.withSelect)(e=>{const t=e(d.store)["getSelectedBlockClientIds"];return{clientIds:t()}})(function(e){var{clientIds:e,rootClientId:t}=e;return Object(g.createElement)(g.Fragment,null,Object(g.createElement)(y,{clientIds:e,rootClientId:t}),1===e.length&&Object(g.createElement)(v,{clientId:e[0]}))})},z4sU:function(e,t){e.exports=window.gc.i18n},"zP/e":function(e,t){e.exports=window.gc.url}});