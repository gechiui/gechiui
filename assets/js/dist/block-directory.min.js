/*! This file is auto-generated */
!function(){"use strict";var l={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},d:function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},e={},t=(l.r(e),l.d(e,{store:function(){return T}}),{}),n=(l.r(t),l.d(t,{getDownloadableBlocks:function(){return m},getErrorNoticeForBlock:function(){return H},getErrorNotices:function(){return V},getInstalledBlockTypes:function(){return p},getNewBlockTypes:function(){return M},getUnusedBlockTypes:function(){return x},isInstalling:function(){return F},isRequestingDownloadableBlocks:function(){return u}}),{}),r=(l.r(n),l.d(n,{addInstalledBlockType:function(){return U},clearErrorNotice:function(){return Y},fetchDownloadableBlocks:function(){return y},installBlockType:function(){return $},receiveDownloadableBlocks:function(){return v},removeInstalledBlockType:function(){return q},setErrorNotice:function(){return W},setIsInstalling:function(){return G},uninstallBlockType:function(){return K}}),{}),E=(l.r(r),l.d(r,{getDownloadableBlocks:function(){return te}}),window.gc.element),o=window.gc.plugins,a=window.gc.hooks,f=window.gc.blocks,w=window.gc.data,c=window.gc.editor,i=(0,w.combineReducers)({downloadableBlocks:(e={},t)=>{switch(t.type){case"FETCH_DOWNLOADABLE_BLOCKS":return{...e,[t.filterValue]:{isRequesting:!0}};case"RECEIVE_DOWNLOADABLE_BLOCKS":return{...e,[t.filterValue]:{results:t.downloadableBlocks,isRequesting:!1}}}return e},blockManagement:(e={installedBlockTypes:[],isInstalling:{}},t)=>{switch(t.type){case"ADD_INSTALLED_BLOCK_TYPE":return{...e,installedBlockTypes:[...e.installedBlockTypes,t.item]};case"REMOVE_INSTALLED_BLOCK_TYPE":return{...e,installedBlockTypes:e.installedBlockTypes.filter(e=>e.name!==t.item.name)};case"SET_INSTALLING_BLOCK":return{...e,isInstalling:{...e.isInstalling,[t.blockId]:t.isInstalling}}}return e},errorNotices:(e={},t)=>{switch(t.type){case"SET_ERROR_NOTICE":return{...e,[t.blockId]:{message:t.message,isFatal:t.isFatal}};case"CLEAR_ERROR_NOTICE":const{[t.blockId]:n,...l}=e;return l}return e}}),d=window.gc.blockEditor;function s(t,n=[]){if(n.length){if(n.some(({name:e})=>e===t.name))return!0;for(let e=0;e<n.length;e++)if(s(t,n[e].innerBlocks))return!0}return!1}function u(e,t){return null!=(e=e.downloadableBlocks[t]?.isRequesting)&&e}function m(e,t){return null!=(e=e.downloadableBlocks[t]?.results)?e:[]}function p(e){return e.blockManagement.installedBlockTypes}const M=(0,w.createRegistrySelector)(n=>e=>{const t=n(d.store).getBlocks();return p(e).filter(e=>s(e,t))}),x=(0,w.createRegistrySelector)(n=>e=>{const t=n(d.store).getBlocks();return p(e).filter(e=>!s(e,t))});function F(e,t){return e.blockManagement.isInstalling[t]||!1}function V(e){return e.errorNotices}function H(e,t){return e.errorNotices[t]}var h=window.gc.i18n,k=window.gc.apiFetch,g=l.n(k),b=window.gc.notices,j=window.gc.url;const z=l=>new Promise((e,t)=>{const n=document.createElement(l.nodeName);["id","rel","src","href","type"].forEach(e=>{l[e]&&(n[e]=l[e])}),l.innerHTML&&n.appendChild(document.createTextNode(l.innerHTML)),n.onload=()=>e(!0),n.onerror=()=>t(new Error("Error loading asset.")),document.body.appendChild(n),"link"!==n.nodeName.toLowerCase()&&("script"!==n.nodeName.toLowerCase()||n.src)||e()});function _(e){return!!e&&!(!(e=e.links["gc:plugin"]||e.links.self)||!e.length)&&e[0].href}function y(e){return{type:"FETCH_DOWNLOADABLE_BLOCKS",filterValue:e}}function v(e,t){return{type:"RECEIVE_DOWNLOADABLE_BLOCKS",downloadableBlocks:e,filterValue:t}}const $=u=>async({registry:l,dispatch:r})=>{const{id:o,name:t}=u;let n=!1;r.clearErrorNotice(o);try{r.setIsInstalling(o,!0);var a,c=_(u);let e={};c?await g()({method:"PUT",url:c,data:{status:"active"}}):(a=await g()({method:"POST",path:"gc/v2/plugins",data:{slug:o,status:"active"}}),e=a._links),r.addInstalledBlockType({...u,links:{...u.links,...e}});const s=["api_version","title","category","parent","icon","description","keywords","attributes","provides_context","uses_context","supports","styles","example","variations"];await g()({path:(0,j.addQueryArgs)("/gc/v2/block-types/"+t,{_fields:s})}).catch(()=>{}).then(e=>{e&&(0,f.unstable__bootstrapServerSideBlockDefinitions)({[t]:Object.fromEntries(Object.entries(e).filter(([e])=>s.includes(e)))})});var i=await(await g()({url:document.location.href,parse:!1})).text(),i=(new window.DOMParser).parseFromString(i,"text/html");for(const d of Array.from(i.querySelectorAll('link[rel="stylesheet"],script')).filter(e=>e.id&&!document.getElementById(e.id)))await z(d);if(await 0,!l.select(f.store).getBlockTypes().some(e=>e.name===t))throw new Error((0,h.__)("\u6ce8\u518c\u533a\u5757\u51fa\u9519\uff0c\u5c1d\u8bd5\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\u3002"));l.dispatch(b.store).createInfoNotice((0,h.sprintf)((0,h.__)("\u533a\u5757%s\u5df2\u5b89\u88c5\u5e76\u6dfb\u52a0\u3002"),u.title),{speak:!0,type:"snackbar"}),n=!0}catch(e){let t=e.message||(0,h.__)("\u53d1\u751f\u4e86\u4e00\u4e2a\u9519\u8bef\u3002"),n=e instanceof Error;c={folder_exists:(0,h.__)("\u8be5\u533a\u5757\u5df2\u5b89\u88c5\u3002\u5c1d\u8bd5\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\u3002"),unable_to_connect_to_filesystem:(0,h.__)("\u5b89\u88c5\u533a\u5757\u65f6\u51fa\u9519\uff0c\u60a8\u53ef\u4ee5\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\u5e76\u91cd\u8bd5\u3002")};c[e.code]&&(n=!0,t=c[e.code]),r.setErrorNotice(o,t,n),l.dispatch(b.store).createErrorNotice(t,{speak:!0,isDismissible:!0})}return r.setIsInstalling(o,!1),n},K=l=>async({registry:t,dispatch:e})=>{try{var n=_(l);await g()({method:"PUT",url:n,data:{status:"inactive"}}),await g()({method:"DELETE",url:n}),e.removeInstalledBlockType(l)}catch(e){t.dispatch(b.store).createErrorNotice(e.message||(0,h.__)("\u53d1\u751f\u4e86\u4e00\u4e2a\u9519\u8bef\u3002"))}};function U(e){return{type:"ADD_INSTALLED_BLOCK_TYPE",item:e}}function q(e){return{type:"REMOVE_INSTALLED_BLOCK_TYPE",item:e}}function G(e,t){return{type:"SET_INSTALLING_BLOCK",blockId:e,isInstalling:t}}function W(e,t,n=!1){return{type:"SET_ERROR_NOTICE",blockId:e,message:t,isFatal:n}}function Y(e){return{type:"CLEAR_ERROR_NOTICE",blockId:e}}var B=function(){return(B=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.create;Object.create;function Z(e){return e.toLowerCase()}var Q=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],J=/[^A-Z0-9]+/gi;function N(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(e,t){return e.replace(t,n)},e)}function I(e,t){var n=e.charAt(0),e=e.substr(1).toLowerCase();return 0<t&&"0"<=n&&n<="9"?"_"+n+e:""+n.toUpperCase()+e}function X(e,t){for(var n=(t=void 0===(t=B({delimiter:"",transform:I},t=void 0===t?{}:t))?{}:t).splitRegexp,l=void 0===(l=t.stripRegexp)?J:l,r=void 0===(r=t.transform)?Z:r,t=void 0===(t=t.delimiter)?" ":t,o=N(N(e,void 0===n?Q:n,"$1\0$2"),l,"\0"),a=0,c=o.length;"\0"===o.charAt(a);)a++;for(;"\0"===o.charAt(c-1);)c--;return o.slice(a,c).split("\0").map(r).join(t)}function ee(e,t){return 0===t?e.toLowerCase():I(e,t)}const te=t=>async({dispatch:e})=>{if(t)try{e(y(t)),e(v((await g()({path:"gc/v2/block-directory/search?term="+t})).map(e=>Object.fromEntries(Object.entries(e).map(([e,t])=>{return[X(e,B({transform:ee},n=void 0===n?{}:n)),t];var n}))),t))}catch{}};const T=(0,w.createReduxStore)("core/block-directory",{reducer:i,selectors:t,actions:n,resolvers:r});function ne(){const t=(0,w.useDispatch)(T)["uninstallBlockType"],e=(0,w.useSelect)(e=>{var{isAutosavingPost:e,isSavingPost:t}=e(c.store);return t()&&!e()},[]),n=(0,w.useSelect)(e=>e(T).getUnusedBlockTypes(),[]);return(0,E.useEffect)(()=>{e&&n.length&&n.forEach(e=>{t(e),(0,f.unregisterBlockType)(e.name)})},[e]),null}(0,w.register)(T);var L=window.gc.compose,S=window.gc.components,O=window.gc.coreData,C=window.gc.htmlEntities;function D({icon:e,size:t=24,...n}){return(0,E.cloneElement)(e,{width:t,height:t,...n})}var k=window.gc.primitives,le=(0,E.createElement)(k.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,E.createElement)(k.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),re=(0,E.createElement)(k.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,E.createElement)(k.Path,{d:"M9.518 8.783a.25.25 0 00.188-.137l2.069-4.192a.25.25 0 01.448 0l2.07 4.192a.25.25 0 00.187.137l4.626.672a.25.25 0 01.139.427l-3.347 3.262a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.363.264l-4.137-2.176a.25.25 0 00-.233 0l-4.138 2.175a.25.25 0 01-.362-.263l.79-4.607a.25.25 0 00-.072-.222L4.753 9.882a.25.25 0 01.14-.427l4.625-.672zM12 14.533c.28 0 .559.067.814.2l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39v7.143z"})),oe=(0,E.createElement)(k.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,E.createElement)(k.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"}));function ae({rating:e}){var t=.5*Math.round(e/.5),n=Math.floor(e),e=Math.ceil(e-n),l=5-(n+e);return(0,E.createElement)("span",{"aria-label":(0,h.sprintf)((0,h.__)("%s \u661f\uff08\u6700\u9ad8 5 \u661f\uff09"),t)},Array.from({length:n}).map((e,t)=>(0,E.createElement)(D,{key:"full_stars_"+t,className:"block-directory-block-ratings__star-full",icon:le,size:16})),Array.from({length:e}).map((e,t)=>(0,E.createElement)(D,{key:"half_stars_"+t,className:"block-directory-block-ratings__star-half-full",icon:re,size:16})),Array.from({length:l}).map((e,t)=>(0,E.createElement)(D,{key:"empty_stars_"+t,className:"block-directory-block-ratings__star-empty",icon:oe,size:16})))}var ce=({rating:e})=>(0,E.createElement)("span",{className:"block-directory-block-ratings"},(0,E.createElement)(ae,{rating:e}));var R=function({icon:e}){var t="block-directory-downloadable-block-icon";return null!==e.match(/\.(jpeg|jpg|gif|png|svg)(?:\?.*)?$/)?(0,E.createElement)("img",{className:t,src:e,alt:""}):(0,E.createElement)(d.BlockIcon,{className:t,icon:e,showColors:!0})},ie=({block:t})=>{var e=(0,w.useSelect)(e=>e(T).getErrorNoticeForBlock(t.id),[t]);return e?(0,E.createElement)("div",{className:"block-directory-downloadable-block-notice"},(0,E.createElement)("div",{className:"block-directory-downloadable-block-notice__content"},e.message,e.isFatal?" "+(0,h.__)("\u5c1d\u8bd5\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\u3002"):null)):null};function se({composite:e,item:l,onClick:t}){var n,r,o,a,c,{author:i,description:s,icon:d,rating:u,title:m}=l,p=!!(0,f.getBlockType)(l.name),{hasNotice:k,isInstalling:g,isInstallable:b}=(0,w.useSelect)(e=>{var{getErrorNoticeForBlock:e,isInstalling:t}=e(T),e=e(l.id),n=e&&e.isFatal;return{hasNotice:!!e,isInstalling:t(l.id),isInstallable:!n}},[l]);let _="";return p?_=(0,h.__)("\u5df2\u5b89\u88c5\uff01"):g&&(_=(0,h.__)("\u6b63\u5728\u5b89\u88c5...")),(0,E.createElement)(S.__unstableCompositeItem,{__experimentalIsFocusable:!0,role:"option",as:S.Button,...e,className:"block-directory-downloadable-block-list-item",onClick:e=>{e.preventDefault(),t()},isBusy:g,disabled:g||!b,label:([{title:e,rating:n,ratingCount:r},{hasNotice:o,isInstalled:a,isInstalling:c}]=[l,{hasNotice:k,isInstalled:p,isInstalling:g}],n=.5*Math.round(n/.5),!a&&o?(0,h.sprintf)("\u91cd\u8bd5\u5b89\u88c5%s\u3002",(0,C.decodeEntities)(e)):a?(0,h.sprintf)("\u6dfb\u52a0%s\u3002",(0,C.decodeEntities)(e)):c?(0,h.sprintf)("\u6b63\u5728\u5b89\u88c5%s\u3002",(0,C.decodeEntities)(e)):r<1?(0,h.sprintf)("\u5b89\u88c5%s\u3002",(0,C.decodeEntities)(e)):(0,h.sprintf)((0,h._n)("\u5b89\u88c5%1$s\u3002%2$s\u9897\u661f\uff0c%3$s\u6761\u8bc4\u8bba\u3002","\u5b89\u88c5%1$s\u3002%2$s\u9897\u661f\uff0c%3$s\u6761\u8bc4\u8bba\u3002",r),(0,C.decodeEntities)(e),n,r)),showTooltip:!0,tooltipPosition:"top center"},(0,E.createElement)("div",{className:"block-directory-downloadable-block-list-item__icon"},(0,E.createElement)(R,{icon:d,title:m}),g?(0,E.createElement)("span",{className:"block-directory-downloadable-block-list-item__spinner"},(0,E.createElement)(S.Spinner,null)):(0,E.createElement)(ce,{rating:u})),(0,E.createElement)("span",{className:"block-directory-downloadable-block-list-item__details"},(0,E.createElement)("span",{className:"block-directory-downloadable-block-list-item__title"},(0,E.createInterpolateElement)((0,h.sprintf)((0,h.__)("%1$s <span>\u4f5c\u8005%2$s</span>"),(0,C.decodeEntities)(m),i),{span:(0,E.createElement)("span",{className:"block-directory-downloadable-block-list-item__author"})})),k?(0,E.createElement)(ie,{block:l}):(0,E.createElement)(E.Fragment,null,(0,E.createElement)("span",{className:"block-directory-downloadable-block-list-item__desc"},_||(0,C.decodeEntities)(s)),b&&!(p||g)&&(0,E.createElement)(S.VisuallyHidden,null,(0,h.__)("\u5b89\u88c5\u533a\u5757")))))}function de({items:e,onHover:n=()=>{},onSelect:l}){const r=(0,S.__unstableUseCompositeState)(),o=(0,w.useDispatch)(T)["installBlockType"];return e.length?(0,E.createElement)(S.__unstableComposite,{...r,role:"listbox",className:"block-directory-downloadable-blocks-list","aria-label":(0,h.__)("\u53ef\u4f9b\u5b89\u88c5\u7684\u533a\u5757")},e.map(t=>(0,E.createElement)(se,{key:t.id,composite:r,onClick:()=>{(0,f.getBlockType)(t.name)?l(t):o(t).then(e=>{e&&l(t)}),n(null)},onHover:n,item:t}))):null}var ue=window.gc.a11y;function me({children:e,downloadableItems:t,hasLocalBlocks:n}){const l=t.length;return(0,E.useEffect)(()=>{(0,ue.speak)((0,h.sprintf)((0,h._n)("%d\u4e2a\u533a\u5757\u53ef\u4f9b\u5b89\u88c5\u3002","%d additional blocks are available to install.",l),l))},[l]),(0,E.createElement)(E.Fragment,null,!n&&(0,E.createElement)("p",{className:"block-directory-downloadable-blocks-panel__no-local"},(0,h.__)("\u672a\u5728\u60a8\u5b89\u88c5\u7684\u533a\u5757\u4e2d\u627e\u5230\u7ed3\u679c\u3002")),(0,E.createElement)("div",{className:"block-editor-inserter__quick-inserter-separator"}),(0,E.createElement)("div",{className:"block-directory-downloadable-blocks-panel"},(0,E.createElement)("div",{className:"block-directory-downloadable-blocks-panel__header"},(0,E.createElement)("h2",{className:"block-directory-downloadable-blocks-panel__title"},(0,h.__)("\u53ef\u4f9b\u5b89\u88c5")),(0,E.createElement)("p",{className:"block-directory-downloadable-blocks-panel__description"},(0,h.__)("\u9009\u62e9\u4e00\u4e2a\u533a\u5757\u8fdb\u884c\u5b89\u88c5\uff0c\u5e76\u5c06\u5176\u6dfb\u52a0\u5230\u60a8\u7684\u6587\u7ae0\u4e2d\u3002"))),e))}var A=(0,E.createElement)(k.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,E.createElement)(k.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"}));function P(){return(0,E.createElement)(E.Fragment,null,(0,E.createElement)("div",{className:"block-editor-inserter__no-results"},(0,E.createElement)(D,{className:"block-editor-inserter__no-results-icon",icon:A}),(0,E.createElement)("p",null,(0,h.__)("\u672a\u627e\u5230\u7ed3\u679c\u3002"))),(0,E.createElement)("div",{className:"block-editor-inserter__tips"},(0,E.createElement)(S.Tip,null,(0,h.__)("\u60f3\u8981\u521b\u5efa\u60a8\u81ea\u5df1\u7684\u533a\u5757\uff1f"),(0,E.createElement)("br",null),(0,E.createElement)(S.ExternalLink,{href:"https://developer.gechiui.com/block-editor/"},(0,h.__)("\u4ece\u8fd9\u91cc\u5f00\u59cb"),"."))))}const pe=[];var ke=(0,L.compose)([(0,w.withSelect)((e,{filterValue:t,rootClientId:n=null})=>{const{getDownloadableBlocks:l,isRequestingDownloadableBlocks:r}=e(T),o=e(d.store)["canInsertBlockType"];var a,e=e(O.store).canUser("read","block-directory/search");let c=e?(i=t,a=(i=l(i)).filter(e=>o(e,n,!0)),i.length===a.length?i:a):[];0===c.length&&(c=pe);var i=r(t);return{downloadableItems:c,hasPermission:e,isLoading:i}})])(function({downloadableItems:e,onSelect:t,onHover:n,hasLocalBlocks:l,hasPermission:r,isLoading:o,isTyping:a}){return void 0===r||o||a?(0,E.createElement)(E.Fragment,null,r&&!l&&(0,E.createElement)(E.Fragment,null,(0,E.createElement)("p",{className:"block-directory-downloadable-blocks-panel__no-local"},(0,h.__)("\u672a\u5728\u60a8\u5b89\u88c5\u7684\u533a\u5757\u4e2d\u627e\u5230\u7ed3\u679c\u3002")),(0,E.createElement)("div",{className:"block-editor-inserter__quick-inserter-separator"})),(0,E.createElement)("div",{className:"block-directory-downloadable-blocks-panel has-blocks-loading"},(0,E.createElement)(S.Spinner,null))):!1===r?l?null:(0,E.createElement)(P,null):e.length?(0,E.createElement)(me,{downloadableItems:e,hasLocalBlocks:l},(0,E.createElement)(de,{items:e,onSelect:t,onHover:n})):!l&&(0,E.createElement)(P,null)});function ge(){const[o,e]=(0,E.useState)(""),a=(0,L.debounce)(e,400);return(0,E.createElement)(d.__unstableInserterMenuExtension,null,({onSelect:e,onHover:t,filterValue:n,hasItems:l,rootClientId:r})=>(o!==n&&a(n),o?(0,E.createElement)(ke,{onSelect:e,onHover:t,rootClientId:r,filterValue:o,hasLocalBlocks:l,isTyping:n!==o}):null))}function be({items:e}){return e.length?(0,E.createElement)("ul",{className:"block-directory-compact-list"},e.map(({icon:e,id:t,title:n,author:l})=>(0,E.createElement)("li",{key:t,className:"block-directory-compact-list__item"},(0,E.createElement)(R,{icon:e,title:n}),(0,E.createElement)("div",{className:"block-directory-compact-list__item-details"},(0,E.createElement)("div",{className:"block-directory-compact-list__item-title"},n),(0,E.createElement)("div",{className:"block-directory-compact-list__item-author"},(0,h.sprintf)((0,h.__)("\u4f5c\u8005\uff1a%s"),l)))))):null}const _e=(null!=(i=window?.gc?.editPost)?i:{})["PluginPrePublishPanel"];function Ee(){var e=(0,w.useSelect)(e=>e(T).getNewBlockTypes(),[]);return e.length?(0,E.createElement)(_e,{icon:A,title:(0,h.sprintf)((0,h._n)("\u5df2\u52a0: %d \u533a\u5757","Added: %d blocks",e.length),e.length),initialOpen:!0},(0,E.createElement)("p",{className:"installed-blocks-pre-publish-panel__copy"},(0,h._n)("\u4ee5\u4e0b\u533a\u5757\u5df2\u6dfb\u52a0\u81f3\u60a8\u7684\u7cfb\u7edf\u3002","The following blocks have been added to your site.",e.length)),(0,E.createElement)(be,{items:e})):null}function fe({attributes:n,block:l,clientId:r}){var e=(0,w.useSelect)(e=>e(T).isInstalling(l.id),[l.id]);const t=(0,w.useDispatch)(T)["installBlockType"],o=(0,w.useDispatch)(d.store)["replaceBlock"];return(0,E.createElement)(S.Button,{onClick:()=>t(l).then(e=>{var t;e&&(e=(0,f.getBlockType)(l.name),[t]=(0,f.parse)(n.originalContent),t)&&e&&o(r,(0,f.createBlock)(e.name,t.attributes,t.innerBlocks))}),disabled:e,isBusy:e,variant:"primary"},(0,h.sprintf)((0,h.__)("\u5b89\u88c5 %s"),l.title))}const we=({originalBlock:e,...t})=>{const{originalName:n,originalUndelimitedContent:l,clientId:r}=t.attributes,o=(0,w.useDispatch)(d.store)["replaceBlock"];var a=!!l,c=(0,w.useSelect)(e=>{var{canInsertBlockType:e,getBlockRootClientId:t}=e(d.store);return e("core/html",t(r))},[r]);let i=(0,h.sprintf)((0,h.__)("\u60a8\u7684\u7cfb\u7edf\u4e0d\u652f\u6301 %s\u533a\u5757\u3002\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u5b89\u88c5\u8be5\u533a\u5757\u6216\u5b8c\u5168\u5c06\u5176\u79fb\u9664!"),e.title||n);var s=[(0,E.createElement)(fe,{key:"install",block:e,attributes:t.attributes,clientId:t.clientId})];return a&&c&&(i=(0,h.sprintf)((0,h.__)("\u60a8\u7684\u7cfb\u7edf\u4e0d\u652f\u6301%s\u533a\u5757\u3002\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u5b89\u88c5\u8be5\u533a\u5757\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u81ea\u5b9a\u4e49\u7684HTML\u533a\u5757\uff0c\u6216\u8005\u5c06\u5176\u5f7b\u5e95\u79fb\u9664\u3002"),e.title||n),s.push((0,E.createElement)(S.Button,{key:"convert",onClick:()=>{o(t.clientId,(0,f.createBlock)("core/html",{content:l}))},variant:"tertiary"},(0,h.__)("\u7559\u4f5cHTML")))),(0,E.createElement)("div",{...(0,d.useBlockProps)()},(0,E.createElement)(d.Warning,{actions:s},i),(0,E.createElement)(E.RawHTML,null,l))};var he=r=>e=>{const n=e.attributes["originalName"];var{block:t,hasPermission:l}=(0,w.useSelect)(e=>{var t=e(T)["getDownloadableBlocks"],t=t("block:"+n).filter(({name:e})=>n===e);return{hasPermission:e(O.store).canUser("read","block-directory/search"),block:t.length&&t[0]}},[n]);return l&&t?(0,E.createElement)(we,{...e,originalBlock:t}):(0,E.createElement)(r,{...e})};(0,o.registerPlugin)("block-directory",{render(){return(0,E.createElement)(E.Fragment,null,(0,E.createElement)(ne,null),(0,E.createElement)(ge,null),(0,E.createElement)(Ee,null))}}),(0,a.addFilter)("blocks.registerBlockType","block-directory/fallback",(e,t)=>("core/missing"===t&&(e.edit=he(e.edit)),e)),(window.gc=window.gc||{}).blockDirectory=e}();