tinymce.PluginManager.add("gcautoresize",function(d){var c=d.settings,m=300,h=!1;function f(e){return parseInt(e,10)||0}function y(e){var t,o,n,i,a,s,g,l,u,r=tinymce.DOM;h&&(o=d.getDoc())&&(e=e||{},t=o.body,o=o.documentElement,n=c.autoresize_min_height,!t||e&&"setcontent"===e.type&&e.initial||d.plugins.fullscreen&&d.plugins.fullscreen.isFullscreen()?t&&o&&(t.style.overflowY="auto",o.style.overflowY="auto"):(i=d.dom.getStyle(t,"margin-top",!0),a=d.dom.getStyle(t,"margin-bottom",!0),s=d.dom.getStyle(t,"padding-top",!0),g=d.dom.getStyle(t,"padding-bottom",!0),l=d.dom.getStyle(t,"border-top-width",!0),u=d.dom.getStyle(t,"border-bottom-width",!0),(i=t.offsetHeight+f(i)+f(a)+f(s)+f(g)+f(l)+f(u))&&i<o.offsetHeight&&(i=o.offsetHeight),(i=isNaN(i)||i<=0?tinymce.Env.ie?t.scrollHeight:tinymce.Env.webkit&&0===t.clientHeight?0:t.offsetHeight:i)>c.autoresize_min_height&&(n=i),c.autoresize_max_height&&i>c.autoresize_max_height?(n=c.autoresize_max_height,t.style.overflowY="auto",o.style.overflowY="auto"):(t.style.overflowY="hidden",o.style.overflowY="hidden",t.scrollTop=0),n!==m&&(a=n-m,r.setStyle(d.iframeElement,"height",n+"px"),m=n,tinymce.isWebKit&&a<0&&y(e),d.fire("gc-autoresize",{height:n,deltaHeight:"nodechange"===e.type?a:null}))))}function n(e,t,o){setTimeout(function(){y(),e--?n(e,t,o):o&&o()},t)}d.settings.inline||tinymce.Env.iOS||(c.autoresize_min_height=parseInt(d.getParam("autoresize_min_height",d.getElement().offsetHeight),10),c.autoresize_max_height=parseInt(d.getParam("autoresize_max_height",0),10),c.gc_autoresize_on&&(h=!0,d.on("init",function(){d.dom.addClass(d.getBody(),"gc-autoresize")}),d.on("nodechange keyup FullscreenStateChanged",y),d.on("setcontent",function(){n(3,100)}),d.getParam("autoresize_on_init",!0)&&d.on("init",function(){n(10,200,function(){n(5,1e3)})})),d.on("show",function(){m=0}),d.addCommand("gcAutoResize",y),d.addCommand("gcAutoResizeOn",function(){d.dom.hasClass(d.getBody(),"gc-autoresize")||(h=!0,d.dom.addClass(d.getBody(),"gc-autoresize"),d.on("nodechange setcontent keyup FullscreenStateChanged",y),y())}),d.addCommand("gcAutoResizeOff",function(){var e;c.gc_autoresize_on||(h=!1,e=d.getDoc(),d.dom.removeClass(d.getBody(),"gc-autoresize"),d.off("nodechange setcontent keyup FullscreenStateChanged",y),e.body.style.overflowY="auto",e.documentElement.style.overflowY="auto",m=0)}))});